(function(g,y){function Ua(a){g.extend(!0,ka,a)}function pb(a,c,b){function e(){setTimeout(function(){!v.start&&0!==g("body")[0].offsetWidth&&n()},0)}function d(a){if(!v||a!=v.name){A++;t();var b=v,c;b?((b.beforeHide||Va)(),ea(x,x.height()),b.element.hide()):ea(x,1);x.css("overflow","hidden");(v=O[a])?v.element.show():v=O[a]=new U[a](c=W=g("<div class='fc-view fc-view-"+a+"' style='position:absolute'/>").appendTo(x),r);b&&s.deactivateButton(b.name);s.activateButton(a);n();x.css("overflow","");b&&
ea(x,1);c||(v.afterShow||Va)();A--}}function n(b){if(0!==q.offsetWidth){A++;t();fa===y&&h();var x=!1;!v.start||b||z<v.start||z>=v.end?(v.render(z,b||0),p(!0),x=!0):v.sizeDirty?(v.clearEvents(),p(),x=!0):v.eventsDirty&&(v.clearEvents(),x=!0);v.sizeDirty=!1;v.eventsDirty=!1;b=x;!c.lazyFetching||J(v.visStart,v.visEnd)?i():b&&m();M=a.outerWidth();s.updateTitle(v.title);b=new Date;b>=v.start&&b<v.end?s.disableButton("today"):s.enableButton("today");A--;v.trigger("viewDisplay",q)}}function k(){f();0!==
q.offsetWidth&&(h(),p(),t(),v.clearEvents(),v.renderEvents(P),v.sizeDirty=!1)}function f(){g.each(O,function(a,b){b.sizeDirty=!0})}function h(){fa=c.contentHeight?c.contentHeight:c.height?c.height-(G?G.height():0)-wa(x):Math.round(x.width()/Math.max(c.aspectRatio,0.5))}function p(a){A++;v.setHeight(fa,a);W&&(W.css("position","relative"),W=null);v.setWidth(x.width(),a);A--}function j(){if(!A)if(v.start){var b=++S;setTimeout(function(){if(b==S&&!A&&0!==q.offsetWidth&&M!=(M=a.outerWidth()))A++,k(),v.trigger("windowResize",
q),A--},200)}else e()}function i(){l(v.visStart,v.visEnd)}function m(a){oa();0!==q.offsetWidth&&(v.clearEvents(),v.renderEvents(P,a),v.eventsDirty=!1)}function oa(){g.each(O,function(a,b){b.eventsDirty=!0})}function t(){v&&v.unselect()}var r=this;r.options=c;r.render=function(b){x?(h(),f(),oa(),n(b)):(a.addClass("fc"),c.isRTL?a.addClass("fc-rtl"):a.addClass("fc-ltr"),c.theme&&a.addClass("ui-widget"),x=g("<div class='fc-content' style='position:relative'/>").prependTo(a),s=new qb(r,c),(G=s.render())&&
a.prepend(G),d(c.defaultView),g(window).resize(j),0!==g("body")[0].offsetWidth||e())};r.destroy=function(){g(window).unbind("resize",j);s.destroy();x.remove();a.removeClass("fc fc-rtl ui-widget")};r.refetchEvents=i;r.reportEvents=function(a){P=a;m()};r.reportEventChange=function(a){m(a)};r.rerenderEvents=m;r.changeView=d;r.select=function(a,b,c){v.select(a,b,c===y?!0:c)};r.unselect=t;r.prev=function(){n(-1)};r.next=function(){n(1)};r.prevYear=function(){Ca(z,-1);n()};r.nextYear=function(){Ca(z,1);
n()};r.today=function(){z=new Date;n()};r.gotoDate=function(a,b,c){a instanceof Date?z=o(a):Wa(z,a,b,c);n()};r.incrementDate=function(a,b,c){a!==y&&Ca(z,a);b!==y&&Da(z,b);c!==y&&u(z,c);n()};r.formatDate=function(a,b){return ga(a,b,c)};r.formatDates=function(a,b,x){return Ea(a,b,x,c)};r.getDate=function(){return o(z)};r.getView=function(){return v};r.option=function(a,b){if(b===y)return c[a];if("height"==a||"contentHeight"==a||"aspectRatio"==a)c[a]=b,k()};r.trigger=function(a,b){if(c[a])return c[a].apply(b||
q,Array.prototype.slice.call(arguments,2))};rb.call(r,c,b);var J=r.isFetchNeeded,l=r.fetchEvents,q=a[0],s,G,x,v,O={},M,fa,W,S=0,A=0,z=new Date,P=[],B;Wa(z,c.year,c.month,c.date);c.droppable&&g(document).bind("dragstart",function(a,b){var x=a.target,d=g(x);if(!d.parents(".fc").length){var e=c.dropAccept;if(g.isFunction(e)?e.call(x,d):d.is(e))B=x,v.dragStart(B,a,b)}}).bind("dragstop",function(a,b){B&&(v.dragStop(B,a,b),B=null)})}function qb(a,c){function b(b){var e=g("<td class='fc-header-"+b+"'/>");
(b=c.header[b])&&g.each(b.split(" "),function(b){0<b&&e.append("<span class='fc-header-space'/>");var h;g.each(this.split(","),function(b,f){if("title"==f)e.append("<span class='fc-header-title'><h2>&nbsp;</h2></span>"),h&&h.addClass(d+"-corner-right"),h=null;else{var n;a[f]?n=a[f]:U[f]&&(n=function(){t.removeClass(d+"-state-hover");a.changeView(f)});if(n){var o=c.theme?Fa(c.buttonIcons,f):null,u=Fa(c.buttonText,f),t=g("<span class='fc-button fc-button-"+f+" "+d+"-state-default'>"+(o?"<span class='fc-icon-wrap'><span class='ui-icon ui-icon-"+
o+"'/></span>":u)+"</span>").click(function(){t.hasClass(d+"-state-disabled")||n()}).mousedown(function(){t.not("."+d+"-state-active").not("."+d+"-state-disabled").addClass(d+"-state-down")}).mouseup(function(){t.removeClass(d+"-state-down")}).hover(function(){t.not("."+d+"-state-active").not("."+d+"-state-disabled").addClass(d+"-state-hover")},function(){t.removeClass(d+"-state-hover").removeClass(d+"-state-down")}).appendTo(e);ya(t);h||t.addClass(d+"-corner-left");h=t}}});h&&h.addClass(d+"-corner-right")});
return e}this.render=function(){d=c.theme?"ui":"fc";if(c.header)return e=g("<table class='fc-header' style='width:100%'/>").append(g("<tr/>").append(b("left")).append(b("center")).append(b("right")))};this.destroy=function(){e.remove()};this.updateTitle=function(a){e.find("h2").html(a)};this.activateButton=function(a){e.find("span.fc-button-"+a).addClass(d+"-state-active")};this.deactivateButton=function(a){e.find("span.fc-button-"+a).removeClass(d+"-state-active")};this.disableButton=function(a){e.find("span.fc-button-"+
a).addClass(d+"-state-disabled")};this.enableButton=function(a){e.find("span.fc-button-"+a).removeClass(d+"-state-disabled")};var e=g([]),d}function rb(a,c){function b(b,c){e(b,function(d){if(c==J){if(d){a.eventDataTransform&&(d=g.map(d,a.eventDataTransform));b.eventDataTransform&&(d=g.map(d,b.eventDataTransform));for(var e=0;e<d.length;e++)d[e].source=b,f(d[e]);s=s.concat(d)}l--;l||i(s)}})}function e(b,c){var d,f=E.sourceFetchers,h;for(d=0;d<f.length;d++){h=f[d](b,t,r,c);if(!0===h)return;if("object"==
typeof h){e(h,c);return}}if(d=b.events)g.isFunction(d)?(n(),d(o(t),o(r),function(a){c(a);k()})):g.isArray(d)?c(d):c();else if(b.url){var q=b.success,i=b.error,p=b.complete;d=g.extend({},b.data||{});f=la(b.startParam,a.startParam);h=la(b.endParam,a.endParam);f&&(d[f]=Math.round(+t/1E3));h&&(d[h]=Math.round(+r/1E3));n();g.ajax(g.extend({},sb,b,{data:d,success:function(a){var a=a||[],b=pa(q,this,arguments);g.isArray(b)&&(a=b);c(a)},error:function(){pa(i,this,arguments);c()},complete:function(){pa(p,
this,arguments);k()}}))}else c()}function d(a){g.isFunction(a)||g.isArray(a)?a={events:a}:"string"==typeof a&&(a={url:a});if("object"==typeof a){var b=a;b.className?"string"==typeof b.className&&(b.className=b.className.split(/\s+/)):b.className=[];for(var c=E.sourceNormalizers,d=0;d<c.length;d++)c[d](b);u.push(a);return a}}function n(){q++||p("loading",null,!0)}function k(){--q||p("loading",null,!1)}function f(b){var c=b.source||{},d=la(c.ignoreTimezone,a.ignoreTimezone);b._id=b._id||(b.id===y?"_fc"+
tb++:b.id+"");b.date&&(b.start||(b.start=b.date),delete b.date);b._start=o(b.start=Ga(b.start,d));b.end=Ga(b.end,d);b.end&&b.end<=b.start&&(b.end=null);b._end=b.end?o(b.end):null;b.allDay===y&&(b.allDay=la(c.allDayDefault,a.allDayDefault));b.className?"string"==typeof b.className&&(b.className=b.className.split(/\s+/)):b.className=[]}function h(a){return("object"==typeof a?a.events||a.url:"")||a}this.isFetchNeeded=function(a,b){return!t||a<t||b>r};this.fetchEvents=function(a,c){t=a;r=c;s=[];var d=
++J,e=u.length;l=e;for(var f=0;f<e;f++)b(u[f],d)};this.addEventSource=function(a){if(a=d(a))l++,b(a,J)};this.removeEventSource=function(a){u=g.grep(u,function(b){return!(b&&a&&h(b)==h(a))});s=g.grep(s,function(b){return!(b.source&&a&&h(b.source)==h(a))});i(s)};this.updateEvent=function(a){var b,c=s.length,d,e=j().defaultEventEnd,h=a.start-a._start,k=a.end?a.end-(a._end||e(a)):0;for(b=0;b<c;b++)d=s[b],d._id==a._id&&d!=a&&(d.start=new Date(+d.start+h),d.end=a.end?d.end?new Date(+d.end+k):new Date(+e(d)+
k):null,d.title=a.title,d.url=a.url,d.allDay=a.allDay,d.className=a.className,d.editable=a.editable,d.color=a.color,d.backgroudColor=a.backgroudColor,d.borderColor=a.borderColor,d.textColor=a.textColor,f(d));f(a);i(s)};this.renderEvent=function(a,b){f(a);a.source||(b&&(m.events.push(a),a.source=m),s.push(a));i(s)};this.removeEvents=function(a){if(a){if(!g.isFunction(a))var b=a+"",a=function(a){return a._id==b};s=g.grep(s,a,!0);for(c=0;c<u.length;c++)g.isArray(u[c].events)&&(u[c].events=g.grep(u[c].events,
a,!0))}else{s=[];for(var c=0;c<u.length;c++)g.isArray(u[c].events)&&(u[c].events=[])}i(s)};this.clientEvents=function(a){return g.isFunction(a)?g.grep(s,a):a?(a+="",g.grep(s,function(b){return b._id==a})):s};this.normalizeEvent=f;for(var p=this.trigger,j=this.getView,i=this.reportEvents,m={events:[]},u=[m],t,r,J=0,l=0,q=0,s=[],G=0;G<c.length;G++)d(c[G])}function Ca(a,c,b){a.setFullYear(a.getFullYear()+c);b||qa(a);return a}function Da(a,c,b){if(+a){var c=a.getMonth()+c,e=o(a);e.setDate(1);e.setMonth(c);
a.setMonth(c);for(b||qa(a);a.getMonth()!=e.getMonth();)a.setDate(a.getDate()+(a<e?1:-1))}return a}function u(a,c,b){if(+a){var c=a.getDate()+c,e=o(a);e.setHours(9);e.setDate(c);a.setDate(c);b||qa(a);Ha(a,e)}return a}function Ha(a,c){if(+a)for(;a.getDate()!=c.getDate();)a.setTime(+a+(a<c?1:-1)*ub)}function I(a,c){a.setMinutes(a.getMinutes()+c);return a}function qa(a){a.setHours(0);a.setMinutes(0);a.setSeconds(0);a.setMilliseconds(0);return a}function o(a,c){return c?qa(new Date(+a)):new Date(+a)}function Xa(){var a=
0,c;do c=new Date(1970,a++,1);while(c.getHours());return c}function R(a,c,b){for(c=c||1;!a.getDay()||b&&1==a.getDay()||!b&&6==a.getDay();)u(a,c);return a}function V(a,c){return Math.round((o(a,!0)-o(c,!0))/Ya)}function Wa(a,c,b,e){c!==y&&c!=a.getFullYear()&&(a.setDate(1),a.setMonth(0),a.setFullYear(c));b!==y&&b!=a.getMonth()&&(a.setDate(1),a.setMonth(b));e!==y&&a.setDate(e)}function Ga(a,c){if("object"==typeof a)return a;if("number"==typeof a)return new Date(1E3*a);if("string"==typeof a){if(a.match(/^\d+(\.\d+)?$/))return new Date(1E3*
parseFloat(a));c===y&&(c=!0);return Ia(a,c)||(a?new Date(a):null)}return null}function Ia(a,c){var b=a.match(/^([0-9]{4})(-([0-9]{2})(-([0-9]{2})([T ]([0-9]{2}):([0-9]{2})(:([0-9]{2})(\.([0-9]+))?)?(Z|(([-+])([0-9]{2})(:?([0-9]{2}))?))?)?)?)?$/);if(!b)return null;var e=new Date(b[1],0,1);if(c||!b[13]){var d=new Date(b[1],0,1,9,0);b[3]&&(e.setMonth(b[3]-1),d.setMonth(b[3]-1));b[5]&&(e.setDate(b[5]),d.setDate(b[5]));Ha(e,d);b[7]&&e.setHours(b[7]);b[8]&&e.setMinutes(b[8]);b[10]&&e.setSeconds(b[10]);
b[12]&&e.setMilliseconds(1E3*Number("0."+b[12]));Ha(e,d)}else e.setUTCFullYear(b[1],b[3]?b[3]-1:0,b[5]||1),e.setUTCHours(b[7]||0,b[8]||0,b[10]||0,b[12]?1E3*Number("0."+b[12]):0),b[14]&&(d=60*Number(b[16])+(b[18]?Number(b[18]):0),d*="-"==b[15]?1:-1,e=new Date(+e+6E4*d));return e}function Ja(a){if("number"==typeof a)return 60*a;if("object"==typeof a)return 60*a.getHours()+a.getMinutes();if(a=a.match(/(\d+)(?::(\d+))?\s*(\w+)?/)){var c=parseInt(a[1],10);a[3]&&(c%=12,"p"==a[3].toLowerCase().charAt(0)&&
(c+=12));return 60*c+(a[2]?parseInt(a[2],10):0)}}function ga(a,c,b){return Ea(a,null,c,b)}function Ea(a,c,b,e){var e=e||ka,d=a,n=c,k,f=b.length,h,g,j,i="";for(k=0;k<f;k++)if(h=b.charAt(k),"'"==h)for(g=k+1;g<f;g++){if("'"==b.charAt(g)){d&&(i=g==k+1?i+"'":i+b.substring(k+1,g),k=g);break}}else if("("==h)for(g=k+1;g<f;g++){if(")"==b.charAt(g)){k=ga(d,b.substring(k+1,g),e);parseInt(k.replace(/\D/,""),10)&&(i+=k);k=g;break}}else if("["==h)for(g=k+1;g<f;g++){if("]"==b.charAt(g)){h=b.substring(k+1,g);k=ga(d,
h,e);k!=ga(n,h,e)&&(i+=k);k=g;break}}else if("{"==h)d=c,n=a;else if("}"==h)d=a,n=c;else{for(g=f;g>k;g--)if(j=Za[b.substring(k,g)]){d&&(i+=j(d,e));k=g-1;break}g==k&&d&&(i+=h)}return i}function ha(a){var c;a.end?(c=a.end,a=a.allDay,c=o(c),c=a||c.getHours()||c.getMinutes()?u(c,1):qa(c)):c=u(o(a.start),1);return c}function vb(a,c){return 100*(c.msLength-a.msLength)+(a.event.start-c.event.start)}function Ka(a,c,b,e){var d=[],g,k=a.length,f,h,p,j,i;for(g=0;g<k;g++)if(f=a[g],h=f.start,p=c[g],p>b&&h<e)h<
b?(h=o(b),j=!1):j=!0,p>e?(p=o(e),i=!1):i=!0,d.push({event:f,start:h,end:p,isStart:j,isEnd:i,msLength:p-h});return d.sort(vb)}function La(a){var c=[],b,e=a.length,d,g,k,f;for(b=0;b<e;b++){d=a[b];for(g=0;;){k=!1;if(c[g])for(f=0;f<c[g].length;f++)if(c[g][f].end>d.start&&c[g][f].start<d.end){k=!0;break}if(k)g++;else break}c[g]?c[g].push(d):c[g]=[d]}return c}function $a(a,c,b){a.unbind("mouseover").mouseover(function(a){for(var d=a.target,n;d!=this;)n=d,d=d.parentNode;if((d=n._fci)!==y)n._fci=y,n=c[d],
b(n.event,n.element,n),g(a.target).trigger(a);a.stopPropagation()})}function xa(a,c,b){for(var e=0,d;e<a.length;e++)d=g(a[e]),d.width(Math.max(0,c-Ma(d,b)))}function ab(a,c,b){for(var e=0,d;e<a.length;e++)d=g(a[e]),d.height(Math.max(0,c-wa(d,b)))}function Ma(a,c){return(parseFloat(g.css(a[0],"paddingLeft",!0))||0)+(parseFloat(g.css(a[0],"paddingRight",!0))||0)+((parseFloat(g.css(a[0],"borderLeftWidth",!0))||0)+(parseFloat(g.css(a[0],"borderRightWidth",!0))||0))+(c?(parseFloat(g.css(a[0],"marginLeft",
!0))||0)+(parseFloat(g.css(a[0],"marginRight",!0))||0):0)}function wa(a,c){return(parseFloat(g.css(a[0],"paddingTop",!0))||0)+(parseFloat(g.css(a[0],"paddingBottom",!0))||0)+((parseFloat(g.css(a[0],"borderTopWidth",!0))||0)+(parseFloat(g.css(a[0],"borderBottomWidth",!0))||0))+(c?bb(a):0)}function bb(a){return(parseFloat(g.css(a[0],"marginTop",!0))||0)+(parseFloat(g.css(a[0],"marginBottom",!0))||0)}function ea(a,c){c="number"==typeof c?c+"px":c;a.each(function(a,e){e.style.cssText+=";min-height:"+
c+";_height:"+c})}function Va(){}function cb(a,c){return a-c}function ba(a){return(10>a?"0":"")+a}function Fa(a,c){if(a[c]!==y)return a[c];for(var b=c.split(/(?=[A-Z])/),e=b.length-1,d;0<=e;e--)if(d=a[b[e].toLowerCase()],d!==y)return d;return a[""]}function Z(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;").replace(/\n/g,"<br />")}function db(a){return a.id+"/"+a.className+"/"+a.style.cssText.replace(/(^|;)\s*(top|left|width|height)\s*:[^;]*/ig,
"")}function ya(a){a.attr("unselectable","on").css("MozUserSelect","none").bind("selectstart.ui",function(){return!1})}function za(a){a.children().removeClass("fc-first fc-last").filter(":first-child").addClass("fc-first").end().filter(":last-child").addClass("fc-last")}function wb(a,c){a.each(function(a,e){e.className=e.className.replace(/^fc-\w*/,"fc-"+Na[c.getDay()])})}function eb(a,c){var b=a.source||{},e=a.color,d=b.color,g=c("eventColor"),k=a.backgroundColor||e||b.backgroundColor||d||c("eventBackgroundColor")||
g,e=a.borderColor||e||b.borderColor||d||c("eventBorderColor")||g,b=a.textColor||b.textColor||c("eventTextColor"),d=[];k&&d.push("background-color:"+k);e&&d.push("border-color:"+e);b&&d.push("color:"+b);return d.join(";")}function pa(a,c,b){g.isFunction(a)&&(a=[a]);if(a){var e,d;for(e=0;e<a.length;e++)d=a[e].apply(c,b)||d;return d}}function la(){for(var a=0;a<arguments.length;a++)if(arguments[a]!==y)return arguments[a]}function Oa(a,c,b){function e(b){var c="",e,f;f=ra+"-widget-header";var h=ra+"-widget-content",
k=i.start.getMonth(),n=qa(new Date),j,o,c=c+"<table class='fc-border-separate' style='width:100%' cellspacing='0'><thead><tr>";ca&&(c+="<th class='fc-week-number "+f+"'/>");for(e=0;e<D;e++)j=p(0,e),c+="<th class='fc-day-header fc-"+Na[j.getDay()]+" "+f+"'/>";c+="</tr></thead><tbody>";for(e=0;e<N;e++){c+="<tr class='fc-week'>";ca&&(c+="<td class='fc-week-number "+h+"'><div/></td>");for(f=0;f<D;f++)j=p(e,f),o=["fc-day","fc-"+Na[j.getDay()],h],j.getMonth()!=k&&o.push("fc-other-month"),+j==+n&&(o.push("fc-today"),
o.push(ra+"-state-highlight")),c+="<td class='"+o.join(" ")+"' data-date='"+q(j,"yyyy-MM-dd")+"'><div>",b&&(c+="<div class='fc-day-number'>"+j.getDate()+"</div>"),c+="<div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></div></td>";c+="</tr>"}c+="</tbody></table>";ea(a,a.height());s&&s.remove();s=g(c).appendTo(a);G=s.find("thead");x=G.find(".fc-day-header");v=s.find("tbody");O=v.find("tr");M=v.find(".fc-day");fa=O.find("td:first-child");W=O.eq(0).find(".fc-day-content > div");
za(G.add(G.find("tr")));za(O);O.eq(0).addClass("fc-first");O.filter(":last").addClass("fc-last");ca&&G.find(".fc-week-number").text(ia);x.each(function(a,b){var c=p(Math.floor(a/D),a%D);g(b).text(q(c,da))});ca&&v.find(".fc-week-number > div").each(function(a,b){var c=p(a,0);g(b).text(q(c,ja))});M.each(function(a,b){var c=p(Math.floor(a/D),a%D);y("dayRender",i,c,g(b))});M.click(d).mousedown(l)}function d(a){if(!m("selectable")){var b=Ia(g(this).data("date"));y("dayClick",this,b,!0,a)}}function n(a,
b,c){c&&L.build();for(var c=o(i.visStart),e=u(o(c),D),f=0;f<N;f++){var g=new Date(Math.max(c,a)),h=new Date(Math.min(e,b));if(g<h){var q;K?(q=V(h,c)*w+C+1,g=V(g,c)*w+C+1):(q=V(g,c),g=V(h,c));k(f,q,f,g-1).click(d).mousedown(l)}u(c,7);u(e,7)}}function k(b,c,d,e){b=L.rect(b,c,d,e,a);return r(b,a)}function f(a){return{row:Math.floor(V(a,i.visStart)/7),col:j(a.getDay())}}function h(a){return p(a.row,a.col)}function p(a,b){return u(o(i.visStart),7*a+b*w+C)}function j(a){return(a-Math.max(T,F)+D)%D*w+C}
var i=this;i.renderBasic=function(b,c,d){N=b;D=c;(K=m("isRTL"))?(w=-1,C=D-1):(w=1,C=0);T=m("firstDay");F=m("weekends")?0:1;ra=m("theme")?"ui":"fc";da=m("columnFormat");ca=m("weekNumbers");ia=m("weekNumberTitle");ja="iso"!=m("weekNumberCalculation")?"w":"W";v?t():S=g("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(a);e(d)};i.setHeight=function(b){z=b;var b=z-G.height(),c,d,e;"variable"==m("weekMode")?c=d=Math.floor(b/(1==N?2:6)):(c=Math.floor(b/N),d=b-c*(N-1));fa.each(function(a,
b){if(a<N){e=g(b);ea(e.find("> div"),(a==N-1?d:c)-wa(e))}});ea(a,1)};i.setWidth=function(a){A=a;H.clear();B=0;ca&&(B=G.find("th.fc-week-number").outerWidth());P=Math.floor((A-B)/D);xa(x.slice(0,-1),P)};i.renderDayOverlay=n;i.defaultSelectionEnd=function(a){return o(a)};i.renderSelection=function(a,b){n(a,u(o(b),1),!0)};i.clearSelection=function(){J()};i.reportDayClick=function(a,b,c){var d=f(a);y("dayClick",M[d.row*D+d.col],a,b,c)};i.dragStart=function(a,b){Q.start(function(a){J();a&&k(a.row,a.col,
a.row,a.col)},b)};i.dragStop=function(a,b,c){var d=Q.stop();J();d&&(d=h(d),y("drop",a,d,!0,b,c))};i.defaultEventEnd=function(a){return o(a.start)};i.getHoverListener=function(){return Q};i.colContentLeft=function(a){return H.left(a)};i.colContentRight=function(a){return H.right(a)};i.dayOfWeekCol=j;i.dateCell=f;i.cellDate=h;i.cellIsAllDay=function(){return!0};i.allDayRow=function(a){return O.eq(a)};i.allDayBounds=function(){var a=0;ca&&(a+=B);return{left:a,right:A}};i.getRowCnt=function(){return N};
i.getColCnt=function(){return D};i.getColWidth=function(){return P};i.getDaySegmentContainer=function(){return S};hb.call(i,a,c,b);ib.call(i);jb.call(i);xb.call(i);var m=i.opt,y=i.trigger,t=i.clearEvents,r=i.renderOverlay,J=i.clearOverlays,l=i.daySelectionMousedown,q=c.formatDate,s,G,x,v,O,M,fa,W,S,A,z,P,B,N,D,L,Q,H,K,w,C,T,F,ra,da,ca,ia,ja;ya(a.addClass("fc-grid"));L=new kb(function(a,b){var c,d,e;x.each(function(a,f){c=g(f);d=c.offset().left;a&&(e[1]=d);e=[d];b[a]=e});e[1]=d+c.outerWidth();O.each(function(b,
f){b<N&&(c=g(f),d=c.offset().top,b&&(e[1]=d),e=[d],a[b]=e)});e[1]=d+c.outerHeight()});Q=new lb(L);H=new mb(function(a){return W.eq(a)})}function xb(){function a(a){var c=l(),d=q(),e=o(b.visStart),d=u(o(e),d),f=g.map(a,ha),h,k,i,n,j,s,p=[];for(h=0;h<c;h++){k=La(Ka(a,f,e,d));for(i=0;i<k.length;i++){n=k[i];for(j=0;j<n.length;j++)s=n[j],s.row=h,s.level=i,p.push(s)}u(e,7);u(d,7)}return p}function c(a,b){var c=t(),f;b.draggable({zIndex:9,delay:50,opacity:e("dragOpacity"),revertDuration:e("dragRevertDuration"),
start:function(g,h){d("eventDragStart",b,a,g,h);i(a,b);c.start(function(c,d,g,h){b.draggable("option","revert",!c||!g&&!h);J();c?(f=7*g+h*(e("isRTL")?-1:1),r(u(o(a.start),f),u(ha(a),f))):f=0},g,"drag")},stop:function(e,g){c.stop();J();d("eventDragStop",b,a,e,g);f?m(this,a,f,0,a.allDay,e,g):(b.css("filter",""),j(a,b))}})}var b=this;b.renderEvents=function(b,c){f(b);s(a(b),c);d("eventAfterAllRender")};b.compileDaySegs=a;b.clearEvents=function(){h();y().empty()};b.bindDaySeg=function(a,b,d){n(a)&&c(a,
b);d.isEnd&&k(a)&&G(a,b,d);p(a,b)};nb.call(b);var e=b.opt,d=b.trigger,n=b.isEventDraggable,k=b.isEventResizable,f=b.reportEvents,h=b.reportEventClear,p=b.eventElementHandlers,j=b.showEvents,i=b.hideEvents,m=b.eventDrop,y=b.getDaySegmentContainer,t=b.getHoverListener,r=b.renderDayOverlay,J=b.clearOverlays,l=b.getRowCnt,q=b.getColCnt,s=b.renderDaySegs,G=b.resizableDayEvent}function ob(a,c,b){function e(){function a(){T.scrollTop(d)}var b=Xa(),c=o(b);c.setHours(q("firstHour"));var d=m(b,c)+1;a();setTimeout(a,
0)}function d(a){if(!q("selectable")){var b=Math.min(X-1,Math.floor((a.pageX-A.offset().left-Y)/Aa)),c=p(b),d=this.parentNode.className.match(/fc-slot(\d+)/);d?(d=parseInt(d[1])*q("slotMinutes"),c.setHours(Math.floor(d/60)),c.setMinutes(d%60+sa),s("dayClick",N[b],c,!1,a)):s("dayClick",N[b],c,!0,a)}}function n(a,b,c){c&&ta.build();var e=o(l.visStart);ba?(c=V(b,e)*ma+na+1,a=V(a,e)*ma+na+1):(c=V(a,e),a=V(b,e));c=Math.max(0,c);a=Math.min(X,a);c<a&&k(0,c,0,a-1).click(d).mousedown(fa)}function k(a,b,c,
d){a=ta.rect(a,b,c,d,H);return x(a,H)}function f(a,b){for(var c=o(l.visStart),e=u(o(c),1),f=0;f<X;f++){var g=new Date(Math.max(c,a)),h=new Date(Math.min(e,b));if(g<h){var k=f*ma+na,k=ta.rect(0,k,0,k,F),g=m(c,g),h=m(c,h);k.top=g;k.height=h-g;x(k,F).click(d).mousedown(r)}u(c,1);u(e,1)}}function h(a){var b=p(a.col),a=a.row;q("allDaySlot")&&a--;0<=a&&I(b,sa+a*ua);return b}function p(a){return u(o(l.visStart),a*ma+na)}function j(a){return q("allDaySlot")&&!a.row}function i(a){return(a-Math.max(ea,ga)+
X)%X*ma+na}function m(a,b){a=o(a,!0);if(b<I(o(a),sa))return 0;if(b>=I(o(a),Z))return da.height();var c=q("slotMinutes"),d=60*b.getHours()+b.getMinutes()-sa,e=Math.floor(d/c),f=Ta[e];f===y&&(f=Ta[e]=da.find("tr:eq("+e+") td div")[0].offsetTop);return Math.max(0,Math.round(f-1+Qa*(d%c/c)))}function oa(a,b){var c=q("selectHelper");ta.build();if(c){var e=V(a,l.visStart)*ma+na;if(0<=e&&e<X){var e=ta.rect(0,e,0,e,F),h=m(a,a),k=m(a,b);if(k>h){e.top=h;e.height=k-h;e.left+=2;e.width-=5;if(g.isFunction(c)){if(c=
c(a,b))e.position="absolute",e.zIndex=8,aa=g(c).css(e).appendTo(F)}else e.isStart=!0,e.isEnd=!0,aa=g(W({title:"",start:a,end:b,className:["fc-select-helper"],editable:!1},e)),aa.css("opacity",q("dragOpacity"));aa&&(aa.click(d).mousedown(r),F.append(aa),xa(aa,e.width,!0),ab(aa,e.height,!0))}}}else f(a,b)}function t(){v();aa&&(aa.remove(),aa=null)}function r(a){if(1==a.which&&q("selectable")){M(a);var b;va.start(function(a,c){t();if(a&&a.col==c.col&&!j(a)){var d=h(c),e=h(a);b=[d,I(o(d),ua),e,I(o(e),
ua)].sort(cb);oa(b[0],b[3])}else b=null},a);g(document).one("mouseup",function(a){va.stop();b&&(+b[0]==+b[1]&&J(b[0],!1,a),O(b[0],b[3],!1,a))})}}function J(a,b,c){s("dayClick",N[i(a.getDay())],a,b,c)}var l=this;l.renderAgenda=function(b){X=b;U=q("theme")?"ui":"fc";ga=q("weekends")?0:1;ea=q("firstDay");(ba=q("isRTL"))?(ma=-1,na=X-1):(ma=1,na=0);sa=Ja(q("minTime"));Z=Ja(q("maxTime"));la=q("columnFormat");ha=q("weekNumbers");ka=q("weekNumberTitle");pa="iso"!=q("weekNumberCalculation")?"w":"W";ua=q("snapMinutes")||
q("slotMinutes");if(A)G();else{var b=U+"-widget-header",c=U+"-widget-content",e,f,h,k,i,n=0==q("slotMinutes")%15;e="<table style='width:100%' class='fc-agenda-days fc-border-separate' cellspacing='0'><thead><tr>";e=ha?e+("<th class='fc-agenda-axis fc-week-number "+b+"'/>"):e+("<th class='fc-agenda-axis "+b+"'>&nbsp;</th>");for(f=0;f<X;f++)e+="<th class='fc- fc-col"+f+" "+b+"'/>";e+="<th class='fc-agenda-gutter "+b+"'>&nbsp;</th></tr></thead><tbody><tr><th class='fc-agenda-axis "+b+"'>&nbsp;</th>";
for(f=0;f<X;f++)e+="<td class='fc- fc-col"+f+" "+c+"'><div><div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></div></td>";A=g(e+("<td class='fc-agenda-gutter "+c+"'>&nbsp;</td></tr></tbody></table>")).appendTo(a);z=A.find("thead");P=z.find("th").slice(1,-1);B=A.find("tbody");N=B.find("td").slice(0,-1);D=N.find("div.fc-day-content div");L=N.eq(0);Q=L.find("> div");za(z.add(z.find("tr")));za(B.add(B.find("tr")));ia=z.find("th:first");ja=A.find(".fc-agenda-gutter");H=g("<div style='position:absolute;z-index:2;left:0;width:100%'/>").appendTo(a);
q("allDaySlot")?(K=g("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(H),e="<table style='width:100%' class='fc-agenda-allday' cellspacing='0'><tr><th class='"+b+" fc-agenda-axis'>"+q("allDayText")+"</th><td><div class='fc-day-content'><div style='position:relative'/></div></td><th class='"+b+" fc-agenda-gutter'>&nbsp;</th></tr></table>",w=g(e).appendTo(H),C=w.find("tr"),C.find("td").click(d).mousedown(fa),ia=ia.add(w.find("th:first")),ja=ja.add(w.find("th.fc-agenda-gutter")),H.append("<div class='fc-agenda-divider "+
b+"'><div class='fc-agenda-divider-inner'/></div>")):K=g([]);T=g("<div style='position:absolute;width:100%;overflow-x:hidden;overflow-y:auto'/>").appendTo(H);F=g("<div style='position:relative;width:100%;overflow:hidden'/>").appendTo(T);ra=g("<div style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(F);e="<table class='fc-agenda-slots' style='width:100%' cellspacing='0'><tbody>";h=Xa();k=I(o(h),Z);I(h,sa);for(f=Sa=0;h<k;f++)i=h.getMinutes(),e+="<tr class='fc-slot"+f+" "+(!i?"":"fc-minor")+
"'><th class='fc-agenda-axis "+b+"'>"+(!n||!i?S(h,q("axisFormat")):"&nbsp;")+"</th><td class='"+c+"'><div style='position:relative'>&nbsp;</div></td></tr>",I(h,q("slotMinutes")),Sa++;da=g(e+"</tbody></table>").appendTo(F);ca=da.find("div:first");da.find("td").click(d).mousedown(r);ia=ia.add(da.find("th:first"))}b=qa(new Date);ha&&(c=S(p(0),pa),c=ba?c+ka:ka+c,z.find(".fc-week-number").text(c));for(c=0;c<X;c++)h=p(c),e=P.eq(c),e.html(S(h,la)),f=N.eq(c),+h==+b?f.addClass(U+"-state-highlight fc-today"):
f.removeClass(U+"-state-highlight fc-today"),wb(e.add(f),h)};l.setWidth=function(a){fb=a;E.clear();Y=0;xa(ia.width("").each(function(a,b){Y=Math.max(Y,g(b).outerWidth())}),Y);a=T[0].clientWidth;(Pa=T.width()-a)?(xa(ja,Pa),ja.show().prev().removeClass("fc-last")):ja.hide().prev().addClass("fc-last");Aa=Math.floor((a-Y)/X);xa(P.slice(0,-1),Aa)};l.setHeight=function(a,b){a===y&&(a=gb);gb=a;Ta={};var c=B.position().top,d=T.position().top,f=Math.min(a-c,da.height()+d+1);Q.height(f-wa(L));H.css("top",c);
T.height(f-d-1);Qa=ca.height()+1;Ra=q("slotMinutes")/ua;Ba=Qa/Ra;b&&e()};l.beforeHide=function(){R=T.scrollTop()};l.afterShow=function(){T.scrollTop(R)};l.defaultEventEnd=function(a){var b=o(a.start);return a.allDay?b:I(b,q("defaultEventMinutes"))};l.timePosition=m;l.dayOfWeekCol=i;l.dateCell=function(a){return{row:Math.floor(V(a,l.visStart)/7),col:i(a.getDay())}};l.cellDate=h;l.cellIsAllDay=j;l.allDayRow=function(){return C};l.allDayBounds=function(){return{left:Y,right:fb-Pa}};l.getHoverListener=
function(){return va};l.colContentLeft=function(a){return E.left(a)};l.colContentRight=function(a){return E.right(a)};l.getDaySegmentContainer=function(){return K};l.getSlotSegmentContainer=function(){return ra};l.getMinMinute=function(){return sa};l.getMaxMinute=function(){return Z};l.getBodyContent=function(){return F};l.getRowCnt=function(){return 1};l.getColCnt=function(){return X};l.getColWidth=function(){return Aa};l.getSnapHeight=function(){return Ba};l.getSnapMinutes=function(){return ua};
l.defaultSelectionEnd=function(a,b){return b?o(a):I(o(a),q("slotMinutes"))};l.renderDayOverlay=n;l.renderSelection=function(a,b,c){c?q("allDaySlot")&&n(a,u(o(b),1),!0):oa(a,b)};l.clearSelection=t;l.reportDayClick=J;l.dragStart=function(a,b){va.start(function(a){v();if(a)if(j(a))k(a.row,a.col,a.row,a.col);else{var a=h(a),b=I(o(a),q("defaultEventMinutes"));f(a,b)}},b)};l.dragStop=function(a,b,c){var d=va.stop();v();d&&s("drop",a,h(d),j(d),b,c)};hb.call(l,a,c,b);ib.call(l);jb.call(l);yb.call(l);var q=
l.opt,s=l.trigger,G=l.clearEvents,x=l.renderOverlay,v=l.clearOverlays,O=l.reportSelection,M=l.unselect,fa=l.daySelectionMousedown,W=l.slotSegHtml,S=c.formatDate,A,z,P,B,N,D,L,Q,H,K,w,C,T,F,ra,da,ca,ia,ja,aa,fb,gb,Y,Aa,Pa,Qa,ua,Ra,Ba,X,Sa,ta,va,E,Ta={},R,U,ea,ga,ba,ma,na,sa,Z,la,ha,ka,pa;ya(a.addClass("fc-agenda"));ta=new kb(function(a,b){var c,d,e;P.each(function(a,f){c=g(f);d=c.offset().left;a&&(e[1]=d);e=[d];b[a]=e});e[1]=d+c.outerWidth();q("allDaySlot")&&(c=C,d=c.offset().top,a[0]=[d,d+c.outerHeight()]);
for(var f=F.offset().top,h=T.offset().top,k=h+T.outerHeight(),i=0;i<Sa*Ra;i++)a.push([Math.max(h,Math.min(k,f+Ba*i)),Math.max(h,Math.min(k,f+Ba*(i+1)))])});va=new lb(ta);E=new mb(function(a){return D.eq(a)})}function yb(){function a(a){var a=La(Ka(a,g.map(a,ha),f.visStart,f.visEnd)),b,c=a.length,d,e,h,k=[];for(b=0;b<c;b++){d=a[b];for(e=0;e<d.length;e++)h=d[e],h.row=0,h.level=b,k.push(h)}return k}function c(a){return a.end?o(a.end):I(o(a.start),h("defaultEventMinutes"))}function b(a,b){var c="<",d=
a.url,e=eb(a,h),f=["fc-event","fc-event-vert"];j(a)&&f.push("fc-event-draggable");b.isStart&&f.push("fc-event-start");b.isEnd&&f.push("fc-event-end");f=f.concat(a.className);a.source&&(f=f.concat(a.source.className||[]));c=d?c+("a href='"+Z(a.url)+"'"):c+"div";c+=" class='"+f.join(" ")+"' style='position:absolute;z-index:8;top:"+b.top+"px;left:"+b.left+"px;"+e+"'><div class='fc-event-inner'><div class='fc-event-time'>"+Z(F(a.start,a.end,h("timeFormat")))+"</div><div class='fc-event-title'>"+Z(a.title)+
"</div></div><div class='fc-event-bg'></div>";b.isEnd&&i(a)&&(c+="<div class='ui-resizable-handle ui-resizable-s'>=</div>");return c+("</"+(d?"a":"div")+">")}function e(a,b,c){var d=b.find("div.fc-event-time");j(a)&&n(a,b,d);c.isEnd&&i(a)&&k(a,b,d);r(a,b)}function d(a,b,c){function d(){g||(b.width(e).height("").draggable("option","grid",null),g=!0)}var e,f,g=!0,k,i=h("isRTL")?-1:1,q=s(),n=A(),j=z(),v=P(),l=x();b.draggable({zIndex:9,opacity:h("dragOpacity","month"),revertDuration:h("dragRevertDuration"),
start:function(s,l){p("eventDragStart",b,a,s,l);L(a,b);e=b.width();q.start(function(e,q,s,p){w();e?(f=!1,k=p*i,e.row?c?g&&(b.width(n-10),ab(b,j*Math.round((a.end?(a.end-a.start)/zb:h("defaultEventMinutes"))/v)),b.draggable("option","grid",[n,1]),g=!1):f=!0:(K(u(o(a.start),k),u(ha(a),k)),d()),f=f||g&&!k):(d(),f=!0);b.draggable("option","revert",f)},s,"drag")},stop:function(c,e){q.stop();w();p("eventDragStop",b,a,c,e);if(f)d(),b.css("filter",""),D(a,b);else{var h=0;g||(h=Math.round((b.offset().top-
B().offset().top)/j)*v+l-(60*a.start.getHours()+a.start.getMinutes()));Q(this,a,k,h,g,c,e)}}})}function n(a,b,c){function d(b){var e=I(o(a.start),b),f;a.end&&(f=I(o(a.end),b));c.text(F(e,f,h("timeFormat")))}function e(){g&&(c.css("display",""),b.draggable("option","grid",[l,x]),g=!1)}var f,g=!1,k,i,q,n=h("isRTL")?-1:1,j=s(),v=S(),l=A(),x=z(),r=P();b.draggable({zIndex:9,scroll:!1,grid:[l,x],axis:1==v?"y":!1,opacity:h("dragOpacity"),revertDuration:h("dragRevertDuration"),start:function(d,s){p("eventDragStart",
b,a,d,s);L(a,b);f=b.position();i=q=0;j.start(function(d,f,i,q){b.draggable("option","revert",!d);w();d&&(k=q*n,h("allDaySlot")&&!d.row?(g||(g=!0,c.hide(),b.draggable("option","grid",null)),K(u(o(a.start),k),u(ha(a),k))):e())},d,"drag")},drag:function(a,b){i=Math.round((b.position.top-f.top)/x)*r;i!=q&&(g||d(i),q=i)},stop:function(c,h){var q=j.stop();w();p("eventDragStop",b,a,c,h);q&&(k||i||g)?Q(this,a,k,g?0:i,g,c,h):(e(),b.css("filter",""),b.css(f),d(0),D(a,b))}})}function k(a,b,c){var d,e,f=z(),
g=P();b.resizable({handles:{s:".ui-resizable-handle"},grid:f,start:function(c,f){d=e=0;L(a,b);b.css("z-index",9);p("eventResizeStart",this,a,c,f)},resize:function(k,i){d=Math.round((Math.max(f,b.height())-i.originalSize.height)/f);d!=e&&(c.text(F(a.start,!d&&!a.end?null:I(m(a),g*d),h("timeFormat"))),e=d)},stop:function(c,e){p("eventResizeStop",this,a,c,e);d?H(this,a,0,g*d,c,e):(b.css("z-index",8),D(a,b))}})}var f=this;f.renderEvents=function(d,k){oa(d);var i,n=d.length,j=[],s=[];for(i=0;i<n;i++)d[i].allDay?
j.push(d[i]):s.push(d[i]);h("allDaySlot")&&(E(a(j),k),J());var n=S(),j=x(),l=G(),D=I(o(f.visStart),j),r=g.map(s,c),K,w,C,m,t,L;i=[];for(K=0;K<n;K++){C=w=La(Ka(s,r,D,I(o(D),l-j)));var Q=L=t=m=void 0,H=void 0,F=void 0;for(m=C.length-1;0<m;m--){Q=C[m];for(t=0;t<Q.length;t++){H=Q[t];for(L=0;L<C[m-1].length;L++)F=C[m-1][L],H.end>F.start&&H.start<F.end&&(F.forward=Math.max(F.forward||0,(H.forward||0)+1))}}for(C=0;C<w.length;C++){m=w[C];for(t=0;t<m.length;t++)L=m[t],L.col=K,L.level=C,i.push(L)}u(D,1,!0)}var s=
i.length,z,A,B;w="";l={};D={};K=q();n=S();(C=h("isRTL"))?(m=-1,Q=n-1):(m=1,Q=0);for(n=0;n<s;n++)j=i[n],r=j.event,t=v(j.start,j.start),L=v(j.start,j.end),z=j.col,H=j.level,F=j.forward||0,A=O(z*m+Q),B=M(z*m+Q)-A,B=Math.min(B-6,0.95*B),z=H?B/(H+F+1):F?2*(B/(F+1)-6):B,H=A+B/(H+F+1)*H*m+(C?B-z:0),j.top=t,j.left=H,j.outerWidth=z,j.outerHeight=L-t,w+=b(r,j);K[0].innerHTML=w;C=K.children();for(n=0;n<s;n++)j=i[n],r=j.event,w=g(C[n]),m=p("eventRender",r,r,w),!1===m?w.remove():(m&&!0!==m&&(w.remove(),w=g(m).css({position:"absolute",
top:j.top,left:j.left}).appendTo(K)),j.element=w,r._id===k?e(r,w,j):w[0]._fci=n,N(r,w));$a(K,i,e);for(n=0;n<s;n++)if(j=i[n],w=j.element)K=l[r=j.key=db(w[0])],j.vsides=K===y?l[r]=wa(w,!0):K,K=D[r],j.hsides=K===y?D[r]=Ma(w,!0):K,r=w.find(".fc-event-title"),r.length&&(j.contentTop=r[0].offsetTop);for(n=0;n<s;n++)if(j=i[n],w=j.element)w[0].style.width=Math.max(0,j.outerWidth-j.hsides)+"px",l=Math.max(0,j.outerHeight-j.vsides),w[0].style.height=l+"px",r=j.event,j.contentTop!==y&&10>l-j.contentTop&&(w.find("div.fc-event-time").text(T(r.start,
h("timeFormat"))+" - "+r.title),w.find("div.fc-event-title").remove()),p("eventAfterRender",r,r,w);p("eventAfterAllRender")};f.compileDaySegs=a;f.clearEvents=function(){t();l().empty();q().empty()};f.slotSegHtml=b;f.bindDaySeg=function(a,b,c){j(a)&&d(a,b,c.isStart);c.isEnd&&i(a)&&W(a,b,c);r(a,b)};nb.call(f);var h=f.opt,p=f.trigger,j=f.isEventDraggable,i=f.isEventResizable,m=f.eventEnd,oa=f.reportEvents,t=f.reportEventClear,r=f.eventElementHandlers,J=f.setHeight,l=f.getDaySegmentContainer,q=f.getSlotSegmentContainer,
s=f.getHoverListener,G=f.getMaxMinute,x=f.getMinMinute,v=f.timePosition,O=f.colContentLeft,M=f.colContentRight,E=f.renderDaySegs,W=f.resizableDayEvent,S=f.getColCnt,A=f.getColWidth,z=f.getSnapHeight,P=f.getSnapMinutes,B=f.getBodyContent,N=f.reportEventElement,D=f.showEvents,L=f.hideEvents,Q=f.eventDrop,H=f.eventResize,K=f.renderDayOverlay,w=f.clearOverlays,C=f.calendar,T=C.formatDate,F=C.formatDates}function hb(a,c,b){function e(a,c){var d=l[a];return"object"==typeof d?Fa(d,c||b):d}function d(a,b){return c.trigger.apply(c,
[a,b||j].concat(Array.prototype.slice.call(arguments,2),[j]))}function g(a){return la(a.editable,(a.source||{}).editable,e("editable"))}function k(a){return a.end?o(a.end):i(a)}function f(a,b,c){var a=J[a._id],d,e=a.length;for(d=0;d<e;d++)if(!b||a[d][0]!=b[0])a[d][c]()}function h(a,b,c,d){for(var c=c||0,e,f=a.length,g=0;g<f;g++)e=a[g],d!==y&&(e.allDay=d),I(u(e.start,b,!0),c),e.end&&(e.end=I(u(e.end,b,!0),c)),m(e,l)}function p(a,b,c){for(var c=c||0,d,e=a.length,f=0;f<e;f++)d=a[f],d.end=I(u(k(d),b,
!0),c),m(d,l)}var j=this;j.element=a;j.calendar=c;j.name=b;j.opt=e;j.trigger=d;j.isEventDraggable=function(a){return g(a)&&!e("disableDragging")};j.isEventResizable=function(a){return g(a)&&!e("disableResizing")};j.reportEvents=function(a){t={};var b,c=a.length,d;for(b=0;b<c;b++)d=a[b],t[d._id]?t[d._id].push(d):t[d._id]=[d]};j.eventEnd=k;j.reportEventElement=function(a,b){r.push(b);J[a._id]?J[a._id].push(b):J[a._id]=[b]};j.reportEventClear=function(){r=[];J={}};j.eventElementHandlers=function(a,b){b.click(function(c){if(!b.hasClass("ui-draggable-dragging")&&
!b.hasClass("ui-resizable-resizing"))return d("eventClick",this,a,c)}).hover(function(b){d("eventMouseover",this,a,b)},function(b){d("eventMouseout",this,a,b)})};j.showEvents=function(a,b){f(a,b,"show")};j.hideEvents=function(a,b){f(a,b,"hide")};j.eventDrop=function(a,b,c,e,f,g,k){var i=b.allDay,j=b._id;h(t[j],c,e,f);d("eventDrop",a,b,c,e,f,function(){h(t[j],-c,-e,i);E(j)},g,k);E(j)};j.eventResize=function(a,b,c,e,f,g){var h=b._id;p(t[h],c,e);d("eventResize",a,b,c,e,function(){p(t[h],-c,-e);E(h)},
f,g);E(h)};var i=j.defaultEventEnd,m=c.normalizeEvent,E=c.reportEventChange,t={},r=[],J={},l=c.options}function nb(){function a(a){var b=p("isRTL"),c,d=a.length,e,f,g,h;c=x();var k=c.left,j=c.right,n,l,r,o,q,s="";for(c=0;c<d;c++)e=a[c],f=e.event,h=["fc-event","fc-event-hori"],i(f)&&h.push("fc-event-draggable"),e.isStart&&h.push("fc-event-start"),e.isEnd&&h.push("fc-event-end"),b?(n=M(e.end.getDay()-1),l=M(e.start.getDay()),r=e.isEnd?v(n):k,o=e.isStart?I(l):j):(n=M(e.start.getDay()),l=M(e.end.getDay()-
1),r=e.isStart?v(n):k,o=e.isEnd?I(l):j),h=h.concat(f.className),f.source&&(h=h.concat(f.source.className||[])),g=f.url,q=eb(f,p),s=g?s+("<a href='"+Z(g)+"'"):s+"<div",s+=" class='"+h.join(" ")+"' style='position:absolute;z-index:8;left:"+r+"px;"+q+"'><div class='fc-event-inner'>",!f.allDay&&e.isStart&&(s+="<span class='fc-event-time'>"+Z(z(f.start,f.end,p("timeFormat")))+"</span>"),s+="<span class='fc-event-title'>"+Z(f.title)+"</span></div>",e.isEnd&&m(f)&&(s+="<div class='ui-resizable-handle ui-resizable-"+
(b?"w":"e")+"'>&nbsp;&nbsp;&nbsp;</div>"),s+="</"+(g?"a":"div")+">",e.left=r,e.outerWidth=o-r,e.startCol=n,e.endCol=l+1;return s}function c(a,b){var c,d=a.length,e,f,h;for(c=0;c<d;c++)e=a[c],f=e.event,h=g(b[c]),f=j("eventRender",f,f,h),!1===f?h.remove():(f&&!0!==f&&(f=g(f).css({position:"absolute",left:e.left}),h.replaceWith(f),h=f),e.element=h)}function b(a){var b,c=a.length,d,e,f,g,h={};for(b=0;b<c;b++)if(d=a[b],e=d.element)f=d.key=db(e[0]),g=h[f],g===y&&(g=h[f]=Ma(e,!0)),d.hsides=g}function e(a){var b,
c=a.length,d,e;for(b=0;b<c;b++)if(d=a[b],e=d.element)e[0].style.width=Math.max(0,d.outerWidth-d.hsides)+"px"}function d(a){var b,c=a.length,d,e,f,g,h={};for(b=0;b<c;b++)if(d=a[b],e=d.element)f=d.key,g=h[f],g===y&&(g=h[f]=bb(e)),d.outerHeight=e[0].offsetHeight+g}function n(){var a,b=q(),c=[];for(a=0;a<b;a++)c[a]=G(a).find("div.fc-day-content > div");return c}function k(a){var b,c=a.length,d=[];for(b=0;b<c;b++)d[b]=a[b][0].offsetTop;return d}function f(a,b){var c,d=a.length,e,f;for(c=0;c<d;c++)if(e=
a[c],f=e.element)f[0].style.top=b[e.row]+(e.top||0)+"px",e=e.event,j("eventAfterRender",e,e,f)}var h=this;h.renderDaySegs=function(g,h){var i=S(),j=q(),l=s(),r=0,p,o,m,v=g.length,u,x;i[0].innerHTML=a(g);c(g,i.children());o=g.length;for(p=0;p<o;p++)m=g[p],(x=m.element)&&t(m.event,x);o=g.length;var y;for(p=0;p<o;p++)if(m=g[p],x=m.element)y=m.event,y._id===h?A(y,x,m):x[0]._fci=p;$a(i,g,A);b(g);e(g);d(g);i=n();for(p=0;p<j;p++){o=[];for(m=0;m<l;m++)o[m]=0;for(;r<v&&(u=g[r]).row==p;){m=o.slice(u.startCol,
u.endCol);m=Math.max.apply(Math,m);u.top=m;m+=u.outerHeight;for(x=u.startCol;x<u.endCol;x++)o[x]=m;r++}i[p].height(Math.max.apply(Math,o))}f(g,k(i))};h.resizableDayEvent=function(i,m,v){var t=p("isRTL"),x=t?"w":"e",w=m.find(".ui-resizable-"+x),y=!1;ya(m);m.mousedown(function(a){a.preventDefault()}).click(function(a){y&&(a.preventDefault(),a.stopImmediatePropagation())});w.mousedown(function(p){if(1==p.which){y=!0;var w=h.getHoverListener(),z=q(),A=s(),G=t?-1:1,I=t?A-1:0,O=m.css("top"),M,R,V=g.extend({},
i),Y=U(i.start);N();g("body").css("cursor",x+"-resize").one("mouseup",function(a){j("eventResizeStop",this,i,a);g("body").css("cursor","");w.stop();B();M&&l(this,i,M,0,a);setTimeout(function(){y=!1},0)});j("eventResizeStart",this,i,p);w.start(function(h,j){if(h){var p=Math.max(Y.row,h.row),m=h.col;1==z&&(p=0);p==Y.row&&(m=t?Math.min(Y.col,m):Math.max(Y.col,m));M=7*p+m*G+I-(7*j.row+j.col*G+I);p=u(E(i),M,!0);if(M){V.end=p;var m=R,l=W([V]),s=v.row,q=g("<div/>"),w=S(),y=l.length,A;q[0].innerHTML=a(l);
q=q.children();w.append(q);c(l,q);b(l);e(l);d(l);f(l,k(n()));q=[];for(w=0;w<y;w++)if(A=l[w].element)l[w].row===s&&A.css("top",O),q.push(A[0]);R=g(q);R.find("*").css("cursor",x+"-resize");m&&m.remove();J(i)}else R&&(r(i),R.remove(),R=null);B();P(i.start,u(o(p),1))}},p)}})};var p=h.opt,j=h.trigger,i=h.isEventDraggable,m=h.isEventResizable,E=h.eventEnd,t=h.reportEventElement,r=h.showEvents,J=h.hideEvents,l=h.eventResize,q=h.getRowCnt,s=h.getColCnt,G=h.allDayRow,x=h.allDayBounds,v=h.colContentLeft,I=
h.colContentRight,M=h.dayOfWeekCol,U=h.dateCell,W=h.compileDaySegs,S=h.getDaySegmentContainer,A=h.bindDaySeg,z=h.calendar.formatDates,P=h.renderDayOverlay,B=h.clearOverlays,N=h.clearSelection}function jb(){function a(a){h&&(h=!1,f(),d("unselect",null,a))}function c(a,b,c,e){h=!0;d("select",null,a,b,c,e)}var b=this;b.select=function(b,d,e){a();d||(d=n(b,e));k(b,d,e);c(b,d,e)};b.unselect=a;b.reportSelection=c;b.daySelectionMousedown=function(d){var h=b.cellDate,i=b.cellIsAllDay,n=b.getHoverListener(),
o=b.reportDayClick;if(1==d.which&&e("selectable")){a(d);var t;n.start(function(a,b){f();a&&i(a)?(t=[h(b),h(a)].sort(cb),k(t[0],t[1],!0)):t=null},d);g(document).one("mouseup",function(a){n.stop();t&&(+t[0]==+t[1]&&o(t[0],!0,a),c(t[0],t[1],!0,a))})}};var e=b.opt,d=b.trigger,n=b.defaultSelectionEnd,k=b.renderSelection,f=b.clearSelection,h=!1;e("selectable")&&e("unselectAuto")&&g(document).mousedown(function(b){var c=e("unselectCancel");(!c||!g(b.target).parents(c).length)&&a(b)})}function ib(){this.renderOverlay=
function(b,e){var d=c.shift();d||(d=g("<div class='fc-cell-overlay' style='position:absolute;z-index:3'/>"));d[0].parentNode!=e[0]&&d.appendTo(e);a.push(d.css(b).show());return d};this.clearOverlays=function(){for(var b;b=a.shift();)c.push(b.hide().unbind())};var a=[],c=[]}function kb(a){var c,b;this.build=function(){c=[];b=[];a(c,b)};this.cell=function(a,d){var g=c.length,k=b.length,f,h=-1,o=-1;for(f=0;f<g;f++)if(d>=c[f][0]&&d<c[f][1]){h=f;break}for(f=0;f<k;f++)if(a>=b[f][0]&&a<b[f][1]){o=f;break}return 0<=
h&&0<=o?{row:h,col:o}:null};this.rect=function(a,d,g,k,f){f=f.offset();return{top:c[a][0]-f.top,left:b[d][0]-f.left,width:b[k][1]-b[d][0],height:c[g][1]-c[a][0]}}}function lb(a){function c(b){b.pageX===y&&(b.pageX=b.originalEvent.pageX,b.pageY=b.originalEvent.pageY);b=a.cell(b.pageX,b.pageY);if(!b!=!n||b&&(b.row!=n.row||b.col!=n.col))b?(d||(d=b),e(b,d,b.row-d.row,b.col-d.col)):e(b,d),n=b}var b,e,d,n;this.start=function(k,f,h){e=k;d=n=null;a.build();c(f);b=h||"mousemove";g(document).bind(b,c)};this.stop=
function(){g(document).unbind(b,c);return n}}function mb(a){var c=this,b={},e={},d={};c.left=function(c){return e[c]=e[c]===y?(b[c]=b[c]||a(c)).position().left:e[c]};c.right=function(e){return d[e]=d[e]===y?c.left(e)+(b[e]=b[e]||a(e)).width():d[e]};c.clear=function(){b={};e={};d={}}}var ka={defaultView:"month",aspectRatio:1.35,header:{left:"title",center:"",right:"today prev,next"},weekends:!0,weekNumbers:!1,weekNumberCalculation:"iso",weekNumberTitle:"W",allDayDefault:!0,ignoreTimezone:!0,lazyFetching:!0,
startParam:"start",endParam:"end",titleFormat:{month:"MMMM yyyy",week:"MMM d[ yyyy]{ '&#8212;'[ MMM] d yyyy}",day:"dddd, MMM d, yyyy"},columnFormat:{month:"ddd",week:"ddd M/d",day:"dddd M/d"},timeFormat:{"":"h(:mm)t"},isRTL:!1,firstDay:0,monthNames:"January,February,March,April,May,June,July,August,September,October,November,December".split(","),monthNamesShort:"Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec".split(","),dayNames:"Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(","),
dayNamesShort:"Sun,Mon,Tue,Wed,Thu,Fri,Sat".split(","),buttonText:{prev:"<span class='fc-text-arrow'>&lsaquo;</span>",next:"<span class='fc-text-arrow'>&rsaquo;</span>",prevYear:"<span class='fc-text-arrow'>&laquo;</span>",nextYear:"<span class='fc-text-arrow'>&raquo;</span>",today:"today",month:"month",week:"week",day:"day"},theme:!1,buttonIcons:{prev:"circle-triangle-w",next:"circle-triangle-e"},unselectAuto:!0,dropAccept:"*"},Ab={header:{left:"next,prev today",center:"",right:"title"},buttonText:{prev:"<span class='fc-text-arrow'>&rsaquo;</span>",
next:"<span class='fc-text-arrow'>&lsaquo;</span>",prevYear:"<span class='fc-text-arrow'>&raquo;</span>",nextYear:"<span class='fc-text-arrow'>&laquo;</span>"},buttonIcons:{prev:"circle-triangle-e",next:"circle-triangle-w"}},E=g.fullCalendar={version:"1.6.1"},U=E.views={};g.fn.fullCalendar=function(a){if("string"==typeof a){var c=Array.prototype.slice.call(arguments,1),b;this.each(function(){var d=g.data(this,"fullCalendar");d&&g.isFunction(d[a])&&(d=d[a].apply(d,c),b===y&&(b=d),"destroy"==a&&g.removeData(this,
"fullCalendar"))});return b!==y?b:this}var e=a.eventSources||[];delete a.eventSources;a.events&&(e.push(a.events),delete a.events);a=g.extend(!0,{},ka,a.isRTL||a.isRTL===y&&ka.isRTL?Ab:{},a);this.each(function(b,c){var k=g(c),f=new pb(k,a,e);k.data("fullCalendar",f);f.render()});return this};E.sourceNormalizers=[];E.sourceFetchers=[];var sb={dataType:"json",cache:!1},tb=1;E.addDays=u;E.cloneDate=o;E.parseDate=Ga;E.parseISO8601=Ia;E.parseTime=Ja;E.formatDate=ga;E.formatDates=Ea;var Na="sun,mon,tue,wed,thu,fri,sat".split(","),
Ya=864E5,ub=36E5,zb=6E4,Za={s:function(a){return a.getSeconds()},ss:function(a){return ba(a.getSeconds())},m:function(a){return a.getMinutes()},mm:function(a){return ba(a.getMinutes())},h:function(a){return a.getHours()%12||12},hh:function(a){return ba(a.getHours()%12||12)},H:function(a){return a.getHours()},HH:function(a){return ba(a.getHours())},d:function(a){return a.getDate()},dd:function(a){return ba(a.getDate())},ddd:function(a,c){return c.dayNamesShort[a.getDay()]},dddd:function(a,c){return c.dayNames[a.getDay()]},
M:function(a){return a.getMonth()+1},MM:function(a){return ba(a.getMonth()+1)},MMM:function(a,c){return c.monthNamesShort[a.getMonth()]},MMMM:function(a,c){return c.monthNames[a.getMonth()]},yy:function(a){return(a.getFullYear()+"").substring(2)},yyyy:function(a){return a.getFullYear()},t:function(a){return 12>a.getHours()?"a":"p"},tt:function(a){return 12>a.getHours()?"am":"pm"},T:function(a){return 12>a.getHours()?"A":"P"},TT:function(a){return 12>a.getHours()?"AM":"PM"},u:function(a){return ga(a,
"yyyy-MM-dd'T'HH:mm:ss'Z'")},S:function(a){a=a.getDate();return 10<a&&20>a?"th":["st","nd","rd"][a%10-1]||"th"},w:function(a,c){return c.weekNumberCalculation(a)},W:function(a){var c=new Date(a.getTime());c.setDate(c.getDate()+4-(c.getDay()||7));a=c.getTime();c.setMonth(0);c.setDate(1);return Math.floor(Math.round((a-c)/864E5)/7)+1}};E.dateFormatters=Za;E.applyAll=pa;U.month=function(a,c){var b=this;b.render=function(a,c){c&&(Da(a,c),a.setDate(1));var h=o(a,!0);h.setDate(1);var p=Da(o(h),1),j=o(h),
i=o(p),m=e("firstDay"),y=e("weekends")?0:1;y&&(R(j),R(i,-1,!0));u(j,-((j.getDay()-Math.max(m,y)+7)%7));u(i,(7-i.getDay()+Math.max(m,y))%7);m=Math.round((i-j)/(7*Ya));"fixed"==e("weekMode")&&(u(i,7*(6-m)),m=6);b.title=g(h,e("titleFormat"));b.start=h;b.end=p;b.visStart=j;b.visEnd=i;d(m,y?5:7,!0)};Oa.call(b,a,c,"month");var e=b.opt,d=b.renderBasic,g=c.formatDate};U.basicWeek=function(a,c){var b=this;b.render=function(a,c){c&&u(a,7*c);var h=u(o(a),-((a.getDay()-e("firstDay")+7)%7)),p=u(o(h),7),j=o(h),
i=o(p),m=e("weekends");m||(R(j),R(i,-1,!0));b.title=g(j,u(o(i),-1),e("titleFormat"));b.start=h;b.end=p;b.visStart=j;b.visEnd=i;d(1,m?7:5,!1)};Oa.call(b,a,c,"basicWeek");var e=b.opt,d=b.renderBasic,g=c.formatDates};U.basicDay=function(a,c){var b=this;b.render=function(a,c){c&&(u(a,c),e("weekends")||R(a,0>c?-1:1));b.title=g(a,e("titleFormat"));b.start=b.visStart=o(a,!0);b.end=b.visEnd=u(o(b.start),1);d(1,1,!1)};Oa.call(b,a,c,"basicDay");var e=b.opt,d=b.renderBasic,g=c.formatDate};Ua({weekMode:"fixed"});
U.agendaWeek=function(a,c){var b=this;b.render=function(a,c){c&&u(a,7*c);var h=u(o(a),-((a.getDay()-e("firstDay")+7)%7)),p=u(o(h),7),j=o(h),i=o(p),m=e("weekends");m||(R(j),R(i,-1,!0));b.title=g(j,u(o(i),-1),e("titleFormat"));b.start=h;b.end=p;b.visStart=j;b.visEnd=i;d(m?7:5)};ob.call(b,a,c,"agendaWeek");var e=b.opt,d=b.renderAgenda,g=c.formatDates};U.agendaDay=function(a,c){var b=this;b.render=function(a,c){c&&(u(a,c),e("weekends")||R(a,0>c?-1:1));var h=o(a,!0),p=u(o(h),1);b.title=g(a,e("titleFormat"));
b.start=b.visStart=h;b.end=b.visEnd=p;d(1)};ob.call(b,a,c,"agendaDay");var e=b.opt,d=b.renderAgenda,g=c.formatDate};Ua({allDaySlot:!0,allDayText:"all-day",firstHour:6,slotMinutes:30,defaultEventMinutes:120,axisFormat:"h(:mm)tt",timeFormat:{agenda:"h:mm{ - h:mm}"},dragOpacity:{agenda:0.5},minTime:0,maxTime:24})})(jQuery);$(document).ready(function(){$("#eventsCalendar").fullCalendar({events:"/data/events.json"})});

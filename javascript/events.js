(function(h,G){function Ua(a){h.extend(!0,wa,a)}function lb(a,c,b){function e(){setTimeout(function(){!n.start&&h("body").is(":visible")&&k()},0)}function d(){return a.is(":visible")}function f(a){n&&a==n.name||(r++,n&&(ca("viewDestroy",n,n,n.element),q(),n.triggerEventDestroy(),x(),n.element.remove(),M.deactivateButton(n.name)),M.activateButton(a),n=new Z[a](h("<div class='fc-view fc-view-"+a+"' style='position:relative'/>").appendTo(H),p),k(),F(),r--)}function k(a){(!n.start||a||w<n.start||w>=n.end)&&
d()&&B(a)}function B(a){r++;n.start&&(ca("viewDestroy",n,n,n.element),q(),y());x();n.render(w,a||0);u();F();(n.afterRender||mb)();M.updateTitle(n.title);a=new Date;a>=n.start&&a<n.end?M.disableButton("today"):M.enableButton("today");ca("viewRender",n,n,n.element);n.trigger("viewDisplay",K);r--;!c.lazyFetching||nb(n.visStart,n.visEnd)?X(n.visStart,n.visEnd):s()}function l(){d()&&(q(),y(),m(),u(),s())}function m(){O=c.contentHeight?c.contentHeight:c.height?c.height-(P?P.height():0)-ta(H):Math.round(H.width()/
Math.max(c.aspectRatio,0.5))}function u(){O===G&&m();r++;n.setHeight(O);n.setWidth(H.width());r--;R=a.outerWidth()}function g(){if(!r)if(n.start){var b=++v;setTimeout(function(){b==v&&(!r&&d())&&R!=(R=a.outerWidth())&&(r++,l(),n.trigger("windowResize",K),r--)},200)}else e()}function A(a){y();s(a)}function s(a){d()&&(n.setEventData(z),n.renderEvents(z,a),n.trigger("eventAfterAllRender"))}function y(){n.triggerEventDestroy();n.clearEvents();n.clearEventData()}function q(){n&&n.unselect()}function x(){H.css({width:"100%",
height:H.height(),overflow:"hidden"})}function F(){H.css({width:"",height:"",overflow:""})}function ca(a,b){if(c[a])return c[a].apply(b||K,Array.prototype.slice.call(arguments,2))}var p=this;p.options=c;p.render=function(b){H?d()&&(m(),B(b)):(a.addClass("fc"),c.isRTL?a.addClass("fc-rtl"):a.addClass("fc-ltr"),c.theme&&a.addClass("ui-widget"),H=h("<div class='fc-content' style='position:relative'/>").prependTo(a),M=new ob(p,c),(P=M.render())&&a.prepend(P),f(c.defaultView),c.handleWindowResize&&h(window).resize(g),
h("body").is(":visible")||e())};p.destroy=function(){n&&(ca("viewDestroy",n,n,n.element),n.triggerEventDestroy());h(window).unbind("resize",g);M.destroy();H.remove();a.removeClass("fc fc-rtl ui-widget")};p.refetchEvents=function(){y();X(n.visStart,n.visEnd)};p.reportEvents=function(a){z=a;s()};p.reportEventChange=function(a){A(a)};p.rerenderEvents=A;p.changeView=f;p.select=function(a,b,c){n.select(a,b,c===G?!0:c)};p.unselect=q;p.prev=function(){k(-1)};p.next=function(){k(1)};p.prevYear=function(){Fa(w,
-1);k()};p.nextYear=function(){Fa(w,1);k()};p.today=function(){w=new Date;k()};p.gotoDate=function(a,b,c){a instanceof Date?w=t(a):Va(w,a,b,c);k()};p.incrementDate=function(a,b,c){a!==G&&Fa(w,a);b!==G&&Ga(w,b);c!==G&&C(w,c);k()};p.formatDate=function(a,b){return ha(a,b,c)};p.formatDates=function(a,b,p){return Ha(a,b,p,c)};p.getDate=function(){return t(w)};p.getView=function(){return n};p.option=function(a,b){if(b===G)return c[a];if("height"==a||"contentHeight"==a||"aspectRatio"==a)c[a]=b,l()};p.trigger=
ca;pb.call(p,c,b);var nb=p.isFetchNeeded,X=p.fetchEvents,K=a[0],M,P,H,n,R,O,v=0,r=0,w=new Date,z=[],D;Va(w,c.year,c.month,c.date);c.droppable&&h(document).bind("dragstart",function(a,b){var p=a.target,d=h(p);if(!d.parents(".fc").length){var e=c.dropAccept;if(h.isFunction(e)?e.call(p,d):d.is(e))D=p,n.dragStart(D,a,b)}}).bind("dragstop",function(a,b){D&&(n.dragStop(D,a,b),D=null)})}function ob(a,c){function b(b){var e=h("<td class='fc-header-"+b+"'/>");(b=c.header[b])&&h.each(b.split(" "),function(b){0<
b&&e.append("<span class='fc-header-space'/>");var f;h.each(this.split(","),function(b,B){if("title"==B)e.append("<span class='fc-header-title'><h2>&nbsp;</h2></span>"),f&&f.addClass(d+"-corner-right"),f=null;else{var g;a[B]?g=a[B]:Z[B]&&(g=function(){y.removeClass(d+"-state-hover");a.changeView(B)});if(g){var t=c.theme?Ia(c.buttonIcons,B):null,s=Ia(c.buttonText,B),y=h("<span class='fc-button fc-button-"+B+" "+d+"-state-default'>"+(t?"<span class='fc-icon-wrap'><span class='ui-icon ui-icon-"+t+"'/></span>":
s)+"</span>").click(function(){y.hasClass(d+"-state-disabled")||g()}).mousedown(function(){y.not("."+d+"-state-active").not("."+d+"-state-disabled").addClass(d+"-state-down")}).mouseup(function(){y.removeClass(d+"-state-down")}).hover(function(){y.not("."+d+"-state-active").not("."+d+"-state-disabled").addClass(d+"-state-hover")},function(){y.removeClass(d+"-state-hover").removeClass(d+"-state-down")}).appendTo(e);xa(y);f||y.addClass(d+"-corner-left");f=y}}});f&&f.addClass(d+"-corner-right")});return e}
this.render=function(){d=c.theme?"ui":"fc";if(c.header)return e=h("<table class='fc-header' style='width:100%'/>").append(h("<tr/>").append(b("left")).append(b("center")).append(b("right")))};this.destroy=function(){e.remove()};this.updateTitle=function(a){e.find("h2").html(a)};this.activateButton=function(a){e.find("span.fc-button-"+a).addClass(d+"-state-active")};this.deactivateButton=function(a){e.find("span.fc-button-"+a).removeClass(d+"-state-active")};this.disableButton=function(a){e.find("span.fc-button-"+
a).addClass(d+"-state-disabled")};this.enableButton=function(a){e.find("span.fc-button-"+a).removeClass(d+"-state-disabled")};var e=h([]),d}function pb(a,c){function b(b,c){e(b,function(d){if(c==y){if(d){a.eventDataTransform&&(d=h.map(d,a.eventDataTransform));b.eventDataTransform&&(d=h.map(d,b.eventDataTransform));for(var e=0;e<d.length;e++)d[e].source=b,f(d[e]);F=F.concat(d)}q--;q||m(F)}})}function e(b,c){var d,f=N.sourceFetchers,k;for(d=0;d<f.length;d++){k=f[d](b,A,s,c);if(!0===k)return;if("object"==
typeof k){e(k,c);return}}if(d=b.events)h.isFunction(d)?(x++||B("loading",null,!0),d(t(A),t(s),function(a){c(a);--x||B("loading",null,!1)})):h.isArray(d)?c(d):c();else if(b.url){var g=b.success,l=b.error,m=b.complete;d=h.isFunction(b.data)?b.data():b.data;d=h.extend({},d||{});f=ia(b.startParam,a.startParam);k=ia(b.endParam,a.endParam);f&&(d[f]=Math.round(+A/1E3));k&&(d[k]=Math.round(+s/1E3));x++||B("loading",null,!0);h.ajax(h.extend({},qb,b,{data:d,success:function(a){a=a||[];var b=ya(g,this,arguments);
h.isArray(b)&&(a=b);c(a)},error:function(){ya(l,this,arguments);c()},complete:function(){ya(m,this,arguments);--x||B("loading",null,!1)}}))}else c()}function d(a){h.isFunction(a)||h.isArray(a)?a={events:a}:"string"==typeof a&&(a={url:a});if("object"==typeof a){var b=a;b.className?"string"==typeof b.className&&(b.className=b.className.split(/\s+/)):b.className=[];for(var c=N.sourceNormalizers,d=0;d<c.length;d++)c[d](b);g.push(a);return a}}function f(b){var c=b.source||{},d=ia(c.ignoreTimezone,a.ignoreTimezone);
b._id=b._id||(b.id===G?"_fc"+rb++:b.id+"");b.date&&(b.start||(b.start=b.date),delete b.date);b._start=t(b.start=Ja(b.start,d));b.end=Ja(b.end,d);b.end&&b.end<=b.start&&(b.end=null);b._end=b.end?t(b.end):null;b.allDay===G&&(b.allDay=ia(c.allDayDefault,a.allDayDefault));b.className?"string"==typeof b.className&&(b.className=b.className.split(/\s+/)):b.className=[]}function k(a){return("object"==typeof a?a.events||a.url:"")||a}this.isFetchNeeded=function(a,b){return!A||a<A||b>s};this.fetchEvents=function(a,
c){A=a;s=c;F=[];var d=++y,e=g.length;q=e;for(var f=0;f<e;f++)b(g[f],d)};this.addEventSource=function(a){if(a=d(a))q++,b(a,y)};this.removeEventSource=function(a){g=h.grep(g,function(b){return!(b&&a&&k(b)==k(a))});F=h.grep(F,function(b){return!(b.source&&a&&k(b.source)==k(a))});m(F)};this.updateEvent=function(a){var b,c=F.length,d,e=l().defaultEventEnd,k=a.start-a._start,g=a.end?a.end-(a._end||e(a)):0;for(b=0;b<c;b++)d=F[b],d._id==a._id&&d!=a&&(d.start=new Date(+d.start+k),d.end=a.end?d.end?new Date(+d.end+
g):new Date(+e(d)+g):null,d.title=a.title,d.url=a.url,d.allDay=a.allDay,d.className=a.className,d.editable=a.editable,d.color=a.color,d.backgroundColor=a.backgroundColor,d.borderColor=a.borderColor,d.textColor=a.textColor,f(d));f(a);m(F)};this.renderEvent=function(a,b){f(a);a.source||(b&&(u.events.push(a),a.source=u),F.push(a));m(F)};this.removeEvents=function(a){if(a){if(!h.isFunction(a)){var b=a+"";a=function(a){return a._id==b}}F=h.grep(F,a,!0);for(c=0;c<g.length;c++)h.isArray(g[c].events)&&(g[c].events=
h.grep(g[c].events,a,!0))}else{F=[];for(var c=0;c<g.length;c++)h.isArray(g[c].events)&&(g[c].events=[])}m(F)};this.clientEvents=function(a){return h.isFunction(a)?h.grep(F,a):a?(a+="",h.grep(F,function(b){return b._id==a})):F};this.normalizeEvent=f;for(var B=this.trigger,l=this.getView,m=this.reportEvents,u={events:[]},g=[u],A,s,y=0,q=0,x=0,F=[],C=0;C<c.length;C++)d(c[C])}function Fa(a,c,b){a.setFullYear(a.getFullYear()+c);b||na(a);return a}function Ga(a,c,b){if(+a){c=a.getMonth()+c;var e=t(a);e.setDate(1);
e.setMonth(c);a.setMonth(c);for(b||na(a);a.getMonth()!=e.getMonth();)a.setDate(a.getDate()+(a<e?1:-1))}return a}function C(a,c,b){if(+a){c=a.getDate()+c;var e=t(a);e.setHours(9);e.setDate(c);a.setDate(c);b||na(a);Ka(a,e)}return a}function Ka(a,c){if(+a)for(;a.getDate()!=c.getDate();)a.setTime(+a+(a<c?1:-1)*sb)}function L(a,c){a.setMinutes(a.getMinutes()+c);return a}function na(a){a.setHours(0);a.setMinutes(0);a.setSeconds(0);a.setMilliseconds(0);return a}function t(a,c){return c?na(new Date(+a)):
new Date(+a)}function Wa(){var a=0,c;do c=new Date(1970,a++,1);while(c.getHours());return c}function ka(a,c){return Math.round((t(a,!0)-t(c,!0))/tb)}function Va(a,c,b,e){c!==G&&c!=a.getFullYear()&&(a.setDate(1),a.setMonth(0),a.setFullYear(c));b!==G&&b!=a.getMonth()&&(a.setDate(1),a.setMonth(b));e!==G&&a.setDate(e)}function Ja(a,c){if("object"==typeof a)return a;if("number"==typeof a)return new Date(1E3*a);if("string"==typeof a){if(a.match(/^\d+(\.\d+)?$/))return new Date(1E3*parseFloat(a));c===G&&
(c=!0);return La(a,c)||(a?new Date(a):null)}return null}function La(a,c){var b=a.match(/^([0-9]{4})(-([0-9]{2})(-([0-9]{2})([T ]([0-9]{2}):([0-9]{2})(:([0-9]{2})(\.([0-9]+))?)?(Z|(([-+])([0-9]{2})(:?([0-9]{2}))?))?)?)?)?$/);if(!b)return null;var e=new Date(b[1],0,1);if(c||!b[13]){var d=new Date(b[1],0,1,9,0);b[3]&&(e.setMonth(b[3]-1),d.setMonth(b[3]-1));b[5]&&(e.setDate(b[5]),d.setDate(b[5]));Ka(e,d);b[7]&&e.setHours(b[7]);b[8]&&e.setMinutes(b[8]);b[10]&&e.setSeconds(b[10]);b[12]&&e.setMilliseconds(1E3*
Number("0."+b[12]));Ka(e,d)}else e.setUTCFullYear(b[1],b[3]?b[3]-1:0,b[5]||1),e.setUTCHours(b[7]||0,b[8]||0,b[10]||0,b[12]?1E3*Number("0."+b[12]):0),b[14]&&(d=60*Number(b[16])+(b[18]?Number(b[18]):0),d*="-"==b[15]?1:-1,e=new Date(+e+6E4*d));return e}function Ma(a){if("number"==typeof a)return 60*a;if("object"==typeof a)return 60*a.getHours()+a.getMinutes();if(a=a.match(/(\d+)(?::(\d+))?\s*(\w+)?/)){var c=parseInt(a[1],10);a[3]&&(c%=12,"p"==a[3].toLowerCase().charAt(0)&&(c+=12));return 60*c+(a[2]?
parseInt(a[2],10):0)}}function ha(a,c,b){return Ha(a,null,c,b)}function Ha(a,c,b,e){e=e||wa;var d=a,f=c,k,h=b.length,l,m,t,g="";for(k=0;k<h;k++)if(l=b.charAt(k),"'"==l)for(m=k+1;m<h;m++){if("'"==b.charAt(m)){d&&(g=m==k+1?g+"'":g+b.substring(k+1,m),k=m);break}}else if("("==l)for(m=k+1;m<h;m++){if(")"==b.charAt(m)){k=ha(d,b.substring(k+1,m),e);parseInt(k.replace(/\D/,""),10)&&(g+=k);k=m;break}}else if("["==l)for(m=k+1;m<h;m++){if("]"==b.charAt(m)){l=b.substring(k+1,m);k=ha(d,l,e);k!=ha(f,l,e)&&(g+=
k);k=m;break}}else if("{"==l)d=c,f=a;else if("}"==l)d=a,f=c;else{for(m=h;m>k;m--)if(t=Xa[b.substring(k,m)]){d&&(g+=t(d,e));k=m-1;break}m==k&&d&&(g+=l)}return g}function ua(a){if(a.end){var c=a.end;a=a.allDay;c=t(c);return a||c.getHours()||c.getMinutes()?C(c,1):na(c)}return C(t(a.start),1)}function Ya(a,c,b){a.unbind("mouseover").mouseover(function(a){for(var d=a.target,f;d!=this;)f=d,d=d.parentNode;(d=f._fci)!==G&&(f._fci=G,f=c[d],b(f.event,f.element,f),h(a.target).trigger(a));a.stopPropagation()})}
function va(a,c,b){for(var e=0,d;e<a.length;e++)d=h(a[e]),d.width(Math.max(0,c-(Na(d)+Oa(d)+(b?Pa(d):0))))}function Za(a,c,b){for(var e=0,d;e<a.length;e++)d=h(a[e]),d.height(Math.max(0,c-ta(d,b)))}function Na(a){return(parseFloat(h.css(a[0],"paddingLeft",!0))||0)+(parseFloat(h.css(a[0],"paddingRight",!0))||0)}function Pa(a){return(parseFloat(h.css(a[0],"marginLeft",!0))||0)+(parseFloat(h.css(a[0],"marginRight",!0))||0)}function Oa(a){return(parseFloat(h.css(a[0],"borderLeftWidth",!0))||0)+(parseFloat(h.css(a[0],
"borderRightWidth",!0))||0)}function ta(a,c){return(parseFloat(h.css(a[0],"paddingTop",!0))||0)+(parseFloat(h.css(a[0],"paddingBottom",!0))||0)+((parseFloat(h.css(a[0],"borderTopWidth",!0))||0)+(parseFloat(h.css(a[0],"borderBottomWidth",!0))||0))+(c?(parseFloat(h.css(a[0],"marginTop",!0))||0)+(parseFloat(h.css(a[0],"marginBottom",!0))||0):0)}function mb(){}function $a(a,c){return a-c}function ba(a){return(10>a?"0":"")+a}function Ia(a,c){if(a[c]!==G)return a[c];for(var b=c.split(/(?=[A-Z])/),e=b.length-
1,d;0<=e;e--)if(d=a[b[e].toLowerCase()],d!==G)return d;return a[""]}function da(a){return a.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;").replace(/\n/g,"<br />")}function xa(a){a.attr("unselectable","on").css("MozUserSelect","none").bind("selectstart.ui",function(){return!1})}function za(a){a.children().removeClass("fc-first fc-last").filter(":first-child").addClass("fc-first").end().filter(":last-child").addClass("fc-last")}function ab(a,
c){var b=a.source||{},e=a.color,d=b.color,f=c("eventColor"),k=a.backgroundColor||e||b.backgroundColor||d||c("eventBackgroundColor")||f,e=a.borderColor||e||b.borderColor||d||c("eventBorderColor")||f,b=a.textColor||b.textColor||c("eventTextColor"),d=[];k&&d.push("background-color:"+k);e&&d.push("border-color:"+e);b&&d.push("color:"+b);return d.join(";")}function ya(a,c,b){h.isFunction(a)&&(a=[a]);if(a){var e,d;for(e=0;e<a.length;e++)d=a[e].apply(c,b)||d;return d}}function ia(){for(var a=0;a<arguments.length;a++)if(arguments[a]!==
G)return arguments[a]}function Qa(a,c,b){function e(){var b=d();G&&G.remove();G=h(b).appendTo(a);p=G.find("thead");L=p.find(".fc-day-header");X=G.find("tbody");K=X.find("tr");M=X.find(".fc-day");P=K.find("td:first-child");H=K.eq(0).find(".fc-day > div");n=K.eq(0).find(".fc-day-content > div");za(p.add(p.find("tr")));za(K);K.eq(0).addClass("fc-first");K.filter(":last").addClass("fc-last");M.each(function(a,b){var c=y(Math.floor(a/D),a%D);u("dayRender",l,c,h(b))});M.click(f).mousedown(s)}function d(){var a=
T+"-widget-header",b,c,d;b="<thead><tr>";V&&(b+="<th class='fc-week-number "+a+"'>"+da(Y)+"</th>");for(c=0;c<D;c++)d=y(0,c),b+="<th class='fc-day-header fc-"+Aa[d.getDay()]+" "+a+"'>"+da(F(d,ga))+"</th>";a="<table class='fc-border-separate' style='width:100%' cellspacing='0'>"+(b+"</tr></thead>");b=T+"-widget-content";var e,f;e="<tbody>";for(c=0;c<z;c++){e+="<tr class='fc-week'>";V&&(f=y(c,0),e+="<td class='fc-week-number "+b+"'><div>"+da(F(f,fa))+"</div></td>");for(d=0;d<D;d++){f=y(c,d);var v=T+
"-widget-content",k=l.start.getMonth(),g=na(new Date),r="",v=["fc-day","fc-"+Aa[f.getDay()],v];f.getMonth()!=k&&v.push("fc-other-month");+f==+g?v.push("fc-today",T+"-state-highlight"):f<g?v.push("fc-past"):v.push("fc-future");r+="<td class='"+v.join(" ")+"' data-date='"+F(f,"yyyy-MM-dd")+"'><div>";ja&&(r+="<div class='fc-day-number'>"+f.getDate()+"</div>");r+="<div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></div></td>";e+=r}e+="</tr>"}return a+(e+"</tbody>")+"</table>"}
function f(a){if(!m("selectable")){var b=La(h(this).data("date"));u("dayClick",this,b,!0,a)}}function k(a,b,c){c&&S.build();a=x(a,b);for(b=0;b<a.length;b++)c=a[b],B(c.row,c.leftCol,c.row,c.rightCol).click(f).mousedown(s)}function B(b,c,d,e){b=S.rect(b,c,d,e,a);return g(b,a)}var l=this;l.renderBasic=function(b,c,d){z=b;D=c;ja=d;T=m("theme")?"ui":"fc";ga=m("columnFormat");V=m("weekNumbers");Y=m("weekNumberTitle");fa="iso"!=m("weekNumberCalculation")?"w":"W";X||(R=h("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(a));
e()};l.setHeight=function(a){v=a;a=v-p.height();var b,c,d;"variable"==m("weekMode")?b=c=Math.floor(a/(1==z?2:6)):(b=Math.floor(a/z),c=a-b*(z-1));P.each(function(a,e){a<z&&(d=h(e),d.find("> div").css("min-height",(a==z-1?c:b)-ta(d)))})};l.setWidth=function(a){O=a;U.clear();aa.clear();w=0;V&&(w=p.find("th.fc-week-number").outerWidth());r=Math.floor((O-w)/D);va(L.slice(0,-1),r)};l.renderDayOverlay=k;l.defaultSelectionEnd=function(a,b){return t(a)};l.renderSelection=function(a,b,c){k(a,C(t(b),1),!0)};
l.clearSelection=function(){A()};l.reportDayClick=function(a,b,c){var d=q(a);u("dayClick",M[d.row*D+d.col],a,b,c)};l.dragStart=function(a,b,c){ma.start(function(a){A();a&&B(a.row,a.col,a.row,a.col)},b)};l.dragStop=function(a,b,c){var d=ma.stop();A();d&&(d=y(d),u("drop",a,d,!0,b,c))};l.defaultEventEnd=function(a){return t(a.start)};l.getHoverListener=function(){return ma};l.colLeft=function(a){return U.left(a)};l.colRight=function(a){return U.right(a)};l.colContentLeft=function(a){return aa.left(a)};
l.colContentRight=function(a){return aa.right(a)};l.getIsCellAllDay=function(){return!0};l.allDayRow=function(a){return K.eq(a)};l.getRowCnt=function(){return z};l.getColCnt=function(){return D};l.getColWidth=function(){return r};l.getDaySegmentContainer=function(){return R};db.call(l,a,c,b);eb.call(l);fb.call(l);ub.call(l);var m=l.opt,u=l.trigger,g=l.renderOverlay,A=l.clearOverlays,s=l.daySelectionMousedown,y=l.cellToDate,q=l.dateToCell,x=l.rangeToSegments,F=c.formatDate,G,p,L,X,K,M,P,H,n,R,O,v,
r,w,z,D,ja,S,ma,U,aa,T,ga,V,Y,fa;xa(a.addClass("fc-grid"));S=new gb(function(a,b){var c,d,e;L.each(function(a,f){c=h(f);d=c.offset().left;a&&(e[1]=d);e=[d];b[a]=e});e[1]=d+c.outerWidth();K.each(function(b,f){b<z&&(c=h(f),d=c.offset().top,b&&(e[1]=d),e=[d],a[b]=e)});e[1]=d+c.outerHeight()});ma=new hb(S);U=new Ba(function(a){return H.eq(a)});aa=new Ba(function(a){return n.eq(a)})}function ub(){var a=this;a.renderEvents=function(c,b){a.renderDayEvents(c,b)};a.clearEvents=function(){a.getDaySegmentContainer().empty()};
ib.call(a)}function jb(a,c,b){function e(){var b;b=pa+"-widget-header";var c,d,e;d="<thead><tr>";ia?(c=R(c,ka),c=kb?c+ba:ba+c,d+="<th class='fc-agenda-axis fc-week-number "+b+"'>"+da(c)+"</th>"):d+="<th class='fc-agenda-axis "+b+"'>&nbsp;</th>";for(e=0;e<la;e++)c=P(0,e),d+="<th class='fc-"+Aa[c.getDay()]+" fc-col"+e+" "+b+"'>"+da(R(c,ha))+"</th>";b="<table style='width:100%' class='fc-agenda-days fc-border-separate' cellspacing='0'>"+(d+("<th class='fc-agenda-gutter "+b+"'>&nbsp;</th></tr></thead>"));
e=pa+"-widget-header";d=pa+"-widget-content";var f;c=na(new Date);var k,fa,g;g=""+("<tbody><tr><th class='fc-agenda-axis "+e+"'>&nbsp;</th>");k="";for(e=0;e<la;e++)f=P(0,e),fa=["fc-col"+e,"fc-"+Aa[f.getDay()],d],+f==+c?fa.push(pa+"-state-highlight","fc-today"):f<c?fa.push("fc-past"):fa.push("fc-future"),f="<td class='"+fa.join(" ")+"'><div><div class='fc-day-content'><div style='position:relative'>&nbsp;</div></div></div></td>",k+=f;g=g+k+("<td class='fc-agenda-gutter "+d+"'>&nbsp;</td></tr></tbody>");
b=b+g+"</table>";O&&O.remove();O=h(b).appendTo(a);v=O.find("thead");r=v.find("th").slice(1,-1);w=O.find("tbody");z=w.find("td").slice(0,-1);D=z.find("> div");ja=z.find(".fc-day-content > div");S=z.eq(0);ma=D.eq(0);za(v.add(v.find("tr")));za(w.add(w.find("tr")))}function d(){function a(){V.scrollTop(d)}var b=Wa(),c=t(b);c.setHours(x("firstHour"));var d=g(b,c)+1;a();setTimeout(a,0)}function f(a){if(!x("selectable")){var b=Math.min(la-1,Math.floor((a.pageX-O.offset().left-qa)/I)),c=P(0,b),d=this.parentNode.className.match(/fc-slot(\d+)/);
d?(d=parseInt(d[1])*x("slotMinutes"),c.setHours(Math.floor(d/60)),c.setMinutes(d%60+Q),F("dayClick",z[b],c,!1,a)):F("dayClick",z[b],c,!0,a)}}function k(a,b,c){c&&W.build();a=n(a,b);for(b=0;b<a.length;b++)c=a[b],B(c.row,c.leftCol,c.row,c.rightCol).click(f).mousedown(K)}function B(a,b,c,d){a=W.rect(a,b,c,d,U);return ca(a,U)}function l(a,b){for(var c=0;c<la;c++){var d=P(0,c),e=C(t(d),1),v=new Date(Math.max(d,a)),k=new Date(Math.min(e,b));v<k&&(e=W.rect(0,c,0,c,Y),v=g(d,v),d=g(d,k),e.top=v,e.height=d-
v,ca(e,Y).click(f).mousedown(y))}}function m(a){return x("allDaySlot")&&!a.row}function u(a){var b=P(0,a.col);a=a.row;x("allDaySlot")&&a--;0<=a&&L(b,Q+a*ra);return b}function g(a,b){a=t(a,!0);if(b<L(t(a),Q))return 0;if(b>=L(t(a),Z))return oa.height();var c=x("slotMinutes"),d=60*b.getHours()+b.getMinutes()-Q,e=Math.floor(d/c),f=Sa[e];f===G&&(f=Sa[e]=oa.find("tr").eq(e).find("td div")[0].offsetTop);return Math.max(0,Math.round(f-1+Ra*(d%c/c)))}function A(a,b){var c=x("selectHelper");W.build();if(c){var d=
H(a).col;if(0<=d&&d<la){var d=W.rect(0,d,0,d,Y),e=g(a,a),v=g(a,b);if(v>e){d.top=e;d.height=v-e;d.left+=2;d.width-=5;if(h.isFunction(c)){if(c=c(a,b))d.position="absolute",ea=h(c).css(d).appendTo(Y)}else d.isStart=!0,d.isEnd=!0,ea=h(M({title:"",start:a,end:b,className:["fc-select-helper"],editable:!1},d)),ea.css("opacity",x("dragOpacity"));ea&&(ea.click(f).mousedown(y),Y.append(ea),va(ea,d.width,!0),Za(ea,d.height,!0))}}}else l(a,b)}function s(){p();ea&&(ea.remove(),ea=null)}function y(a){if(1==a.which&&
x("selectable")){X(a);var b;sa.start(function(a,c){s();if(a&&a.col==c.col&&!m(a)){var d=u(c),e=u(a);b=[d,L(t(d),ra),e,L(t(e),ra)].sort($a);A(b[0],b[3])}else b=null},a);h(document).one("mouseup",function(a){sa.stop();b&&(+b[0]==+b[1]&&q(b[0],!1,a),N(b[0],b[3],!1,a))})}}function q(a,b,c){F("dayClick",z[H(a).col],a,b,c)}this.renderAgenda=function(b){la=b;pa=x("theme")?"ui":"fc";kb=x("isRTL");Q=Ma(x("minTime"));Z=Ma(x("maxTime"));ha=x("columnFormat");ia=x("weekNumbers");ba=x("weekNumberTitle");ka="iso"!=
x("weekNumberCalculation")?"w":"W";ra=x("snapMinutes")||x("slotMinutes");if(O)e();else{b=pa+"-widget-header";var c=pa+"-widget-content",d,v,k,g,r,J=0==x("slotMinutes")%15;e();U=h("<div style='position:absolute;z-index:2;left:0;width:100%'/>").appendTo(a);x("allDaySlot")?(aa=h("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(U),d="<table style='width:100%' class='fc-agenda-allday' cellspacing='0'><tr><th class='"+b+" fc-agenda-axis'>"+x("allDayText")+"</th><td><div class='fc-day-content'><div style='position:relative'/></div></td><th class='"+
b+" fc-agenda-gutter'>&nbsp;</th></tr></table>",T=h(d).appendTo(U),ga=T.find("tr"),ga.find("td").click(f).mousedown(K),U.append("<div class='fc-agenda-divider "+b+"'><div class='fc-agenda-divider-inner'/></div>")):aa=h([]);V=h("<div style='position:absolute;width:100%;overflow-x:hidden;overflow-y:auto'/>").appendTo(U);Y=h("<div style='position:relative;width:100%;overflow:hidden'/>").appendTo(V);fa=h("<div class='fc-event-container' style='position:absolute;z-index:8;top:0;left:0'/>").appendTo(Y);
d="<table class='fc-agenda-slots' style='width:100%' cellspacing='0'><tbody>";v=Wa();g=L(t(v),Z);L(v,Q);for(k=Ta=0;v<g;k++)r=v.getMinutes(),d+="<tr class='fc-slot"+k+" "+(r?"fc-minor":"")+"'><th class='fc-agenda-axis "+b+"'>"+(J&&r?"&nbsp;":R(v,x("axisFormat")))+"</th><td class='"+c+"'><div style='position:relative'>&nbsp;</div></td></tr>",L(v,x("slotMinutes")),Ta++;oa=h(d+"</tbody></table>").appendTo(Y);bb=oa.find("div:first");oa.find("td").click(f).mousedown(y)}};this.setWidth=function(a){Ca.clear();
Da.clear();a=v.find("th:first");T&&(a=a.add(T.find("th:first")));a=a.add(oa.find("th:first"));qa=0;va(a.width("").each(function(a,b){qa=Math.max(qa,h(b).outerWidth())}),qa);a=O.find(".fc-agenda-gutter");T&&(a=a.add(T.find("th.fc-agenda-gutter")));var b=V[0].clientWidth;(cb=V.width()-b)?(va(a,cb),a.show().prev().removeClass("fc-last")):a.hide().prev().addClass("fc-last");I=Math.floor((b-qa)/la);va(r.slice(0,-1),I)};this.setHeight=function(a){a===G&&(a=J);J=a;Sa={};var b=w.position().top,c=V.position().top;
a=Math.min(a-b,oa.height()+c+1);ma.height(a-ta(S));U.css("top",b);V.height(a-c-1);Ra=bb.height()+1;E=x("slotMinutes")/ra;Ea=Ra/E};this.afterRender=function(){d()};this.defaultEventEnd=function(a){var b=t(a.start);return a.allDay?b:L(b,x("defaultEventMinutes"))};this.timePosition=g;this.getIsCellAllDay=m;this.allDayRow=function(a){return ga};this.getCoordinateGrid=function(){return W};this.getHoverListener=function(){return sa};this.colLeft=function(a){return Ca.left(a)};this.colRight=function(a){return Ca.right(a)};
this.colContentLeft=function(a){return Da.left(a)};this.colContentRight=function(a){return Da.right(a)};this.getDaySegmentContainer=function(){return aa};this.getSlotSegmentContainer=function(){return fa};this.getMinMinute=function(){return Q};this.getMaxMinute=function(){return Z};this.getSlotContainer=function(){return Y};this.getRowCnt=function(){return 1};this.getColCnt=function(){return la};this.getColWidth=function(){return I};this.getSnapHeight=function(){return Ea};this.getSnapMinutes=function(){return ra};
this.defaultSelectionEnd=function(a,b){return b?t(a):L(t(a),x("slotMinutes"))};this.renderDayOverlay=k;this.renderSelection=function(a,b,c){c?x("allDaySlot")&&k(a,C(t(b),1),!0):A(a,b)};this.clearSelection=s;this.reportDayClick=q;this.dragStart=function(a,b,c){sa.start(function(a){p();if(a)if(m(a))B(a.row,a.col,a.row,a.col);else{a=u(a);var b=L(t(a),x("defaultEventMinutes"));l(a,b)}},b)};this.dragStop=function(a,b,c){var d=sa.stop();p();d&&F("drop",a,u(d),m(d),b,c)};db.call(this,a,c,b);eb.call(this);
fb.call(this);vb.call(this);var x=this.opt,F=this.trigger,ca=this.renderOverlay,p=this.clearOverlays,N=this.reportSelection,X=this.unselect,K=this.daySelectionMousedown,M=this.slotSegHtml,P=this.cellToDate,H=this.dateToCell,n=this.rangeToSegments,R=c.formatDate,O,v,r,w,z,D,ja,S,ma,U,aa,T,ga,V,Y,fa,oa,bb,ea,J,qa,I,cb,Ra,ra,E,Ea,la,Ta,W,sa,Ca,Da,Sa={},pa,kb,Q,Z,ha,ia,ba,ka;xa(a.addClass("fc-agenda"));W=new gb(function(a,b){var c,d,e;r.each(function(a,f){c=h(f);d=c.offset().left;a&&(e[1]=d);e=[d];b[a]=
e});e[1]=d+c.outerWidth();x("allDaySlot")&&(c=ga,d=c.offset().top,a[0]=[d,d+c.outerHeight()]);for(var f=Y.offset().top,v=V.offset().top,k=v+V.outerHeight(),g=0;g<Ta*E;g++)a.push([Math.max(v,Math.min(k,f+Ea*g)),Math.max(v,Math.min(k,f+Ea*(g+1)))])});sa=new hb(W);Ca=new Ba(function(a){return D.eq(a)});Da=new Ba(function(a){return ja.eq(a)})}function vb(){function a(a){return a.end?t(a.end):L(t(a.start),k("defaultEventMinutes"))}function c(a,b){var c="<",d=a.url,e=ab(a,k),f=["fc-event","fc-event-vert"];
l(a)&&f.push("fc-event-draggable");b.isStart&&f.push("fc-event-start");b.isEnd&&f.push("fc-event-end");f=f.concat(a.className);a.source&&(f=f.concat(a.source.className||[]));c=d?c+("a href='"+da(a.url)+"'"):c+"div";c+=" class='"+f.join(" ")+"' style='position:absolute;top:"+b.top+"px;left:"+b.left+"px;"+e+"'><div class='fc-event-inner'><div class='fc-event-time'>"+da(T(a.start,a.end,k("timeFormat")))+"</div><div class='fc-event-title'>"+da(a.title||"")+"</div></div><div class='fc-event-bg'></div>";
b.isEnd&&m(a)&&(c+="<div class='ui-resizable-handle ui-resizable-s'>=</div>");return c+("</"+(d?"a":"div")+">")}function b(a,b,c){var f=b.find("div.fc-event-time");l(a)&&e(a,b,f);c.isEnd&&m(a)&&d(a,b,f);g(a,b)}function e(a,b,c){function d(){S();if(q)if(E)c.hide(),b.draggable("option","grid",null),ja(C(t(a.start),W),C(ua(a),W));else{var e=A,f=L(t(a.start),e),v;a.end&&(v=L(t(a.end),e));c.text(T(f,v,k("timeFormat")));c.css("display","");b.draggable("option","grid",[g,J])}}var e=f.getCoordinateGrid(),
v=P(),g=H(),J=n(),h=R(),l,m,q,y,E,u,x,s,W,A,D;b.draggable({scroll:!1,grid:[g,J],axis:1==v?"y":!1,opacity:k("dragOpacity"),revertDuration:k("dragRevertDuration"),start:function(c,d){B("eventDragStart",b,a,c,d);w(a,b);e.build();l=b.position();m=e.cell(c.pageX,c.pageY);q=y=!0;E=u=p(m);A=D=W=x=s=0},drag:function(a,c){var f=e.cell(a.pageX,a.pageY);if(q=!!f){E=p(f);x=Math.round((c.position.left-l.left)/g);if(x!=s){var f=K(0,m.col),k=m.col+x,k=Math.max(0,k),k=Math.min(v-1,k),k=K(0,k);W=ka(k,f)}E||(A=Math.round((c.position.top-
l.top)/J)*h)}if(q!=y||E!=u||x!=s||A!=D)d(),y=q,u=E,s=x,D=A;b.draggable("option","revert",!q)},stop:function(c,e){S();B("eventDragStop",b,a,c,e);q&&(E||W||A)?z(this,a,W,E?0:A,E,c,e):(q=!0,E=!1,A=W=x=0,d(),b.css("filter",""),b.css(l),r(a,b))}})}function d(a,b,c){var d,e,f=n(),v=R();b.resizable({handles:{s:".ui-resizable-handle"},grid:f,start:function(c,f){d=e=0;w(a,b);B("eventResizeStart",this,a,c,f)},resize:function(g,r){d=Math.round((Math.max(f,b.height())-r.originalSize.height)/f);d!=e&&(c.text(T(a.start,
d||a.end?L(u(a),v*d):null,k("timeFormat"))),e=d)},stop:function(c,e){B("eventResizeStop",this,a,c,e);d?D(this,a,0,v*d,c,e):r(a,b)}})}var f=this;f.renderEvents=function(d,e){var f,g=d.length,r=[],l=[];for(f=0;f<g;f++)d[f].allDay?r.push(d[f]):l.push(d[f]);k("allDaySlot")&&(Q(r,e),A());var g=P(),r=F(),m=x(),J,q=h.map(l,a),I,n,w,p,E;f=[];for(I=0;I<g;I++){J=K(0,I);L(J,r);n=l;w=q;p=J;J=L(t(J),m-r);E=[];for(var z=void 0,u=n.length,s=void 0,D=void 0,C=void 0,H=C=D=void 0,S=void 0,z=0;z<u;z++)s=n[z],D=s.start,
C=w[z],C>p&&D<J&&(D<p?(D=t(p),H=!1):H=!0,C>J?(C=t(J),S=!1):S=!0,E.push({event:s,start:D,end:C,isStart:H,isEnd:S,msLength:C-D}));n=E.sort(M);w=[];p=void 0;J=n.length;s=u=z=E=void 0;for(p=0;p<J;p++){E=n[p];for(z=0;;){u=!1;if(w[z])for(s=0;s<w[z].length;s++)if(w[z][s].end>E.start&&w[z][s].start<E.end){u=!0;break}if(u)z++;else break}w[z]?w[z].push(E):w[z]=[E]}w=n=w;s=u=z=E=J=p=void 0;for(p=w.length-1;0<p;p--)for(z=w[p],J=0;J<z.length;J++)for(u=z[J],E=0;E<w[p-1].length;E++)s=w[p-1][E],u.end>s.start&&u.start<
s.end&&(s.forward=Math.max(s.forward||0,(u.forward||0)+1));for(w=0;w<n.length;w++)for(p=n[w],J=0;J<p.length;J++)E=p[J],E.col=I,E.level=w,f.push(E)}g=f.length;w="";q=y();J=(p=k("isRTL"))?-1:1;for(l=0;l<g;l++)r=f[l],m=r.event,I=ca(r.start,r.start),n=ca(r.start,r.end),s=r.col,E=r.level,z=r.forward||0,u=N(s),D=X(s)-u,D=Math.min(D-6,0.95*D),s=E?D/(E+z+1):z?2*(D/(z+1)-6):D,E=u+D/(E+z+1)*E*J+(p?D-s:0),r.top=I,r.left=E,r.outerWidth=s,r.outerHeight=n-I,w+=c(m,r);q[0].innerHTML=w;n=q.children();for(l=0;l<g;l++)r=
f[l],m=r.event,I=h(n[l]),w=B("eventRender",m,m,I),!1===w?I.remove():(w&&!0!==w&&(I.remove(),I=h(w).css({position:"absolute",top:r.top,left:r.left}).appendTo(q)),r.element=I,m._id===e?b(m,I,r):I[0]._fci=l,v(m,I));Ya(q,f,b);for(l=0;l<g;l++)if(r=f[l],I=r.element)r.vsides=ta(I,!0),r.hsides=Na(I)+Oa(I)+Pa(I),m=I.find(".fc-event-title"),m.length&&(r.contentTop=m[0].offsetTop);for(l=0;l<g;l++)if(r=f[l],I=r.element)I[0].style.width=Math.max(0,r.outerWidth-r.hsides)+"px",q=Math.max(0,r.outerHeight-r.vsides),
I[0].style.height=q+"px",m=r.event,r.contentTop!==G&&10>q-r.contentTop&&(I.find("div.fc-event-time").text(aa(m.start,k("timeFormat"))+" - "+m.title),I.find("div.fc-event-title").remove()),B("eventAfterRender",m,m,I)};f.clearEvents=function(){s().empty();y().empty()};f.slotSegHtml=c;ib.call(f);var k=f.opt,B=f.trigger,l=f.isEventDraggable,m=f.isEventResizable,u=f.eventEnd,g=f.eventElementHandlers,A=f.setHeight,s=f.getDaySegmentContainer,y=f.getSlotSegmentContainer,q=f.getHoverListener,x=f.getMaxMinute,
F=f.getMinMinute,ca=f.timePosition,p=f.getIsCellAllDay,N=f.colContentLeft,X=f.colContentRight,K=f.cellToDate,M=f.segmentCompare,P=f.getColCnt,H=f.getColWidth,n=f.getSnapHeight,R=f.getSnapMinutes,O=f.getSlotContainer,v=f.reportEventElement,r=f.showEvents,w=f.hideEvents,z=f.eventDrop,D=f.eventResize,ja=f.renderDayOverlay,S=f.clearOverlays,Q=f.renderDayEvents,U=f.calendar,aa=U.formatDate,T=U.formatDates;f.draggableDayEvent=function(a,b,c){function d(){g||(b.width(f).height("").draggable("option","grid",
null),g=!0)}var e=c.isStart,f,v,g=!0,l,m=q(),h=H(),p=n(),s=R(),u=F();b.draggable({opacity:k("dragOpacity","month"),revertDuration:k("dragRevertDuration"),start:function(c,r){B("eventDragStart",b,a,c,r);w(a,b);f=b.width();m.start(function(c,f){S();if(c){v=!1;var r=K(0,f.col),m=K(0,c.col);l=ka(m,r);c.row?e?g&&(b.width(h-10),Za(b,p*Math.round((a.end?(a.end-a.start)/wb:k("defaultEventMinutes"))/s)),b.draggable("option","grid",[h,1]),g=!1):v=!0:(ja(C(t(a.start),l),C(ua(a),l)),d());v=v||g&&!l}else d(),
v=!0;b.draggable("option","revert",v)},c,"drag")},stop:function(c,e){m.stop();S();B("eventDragStop",b,a,c,e);if(v)d(),b.css("filter",""),r(a,b);else{var f=0;g||(f=Math.round((b.offset().top-O().offset().top)/p)*s+u-(60*a.start.getHours()+a.start.getMinutes()));z(this,a,l,f,g,c,e)}}})}}function db(a,c,b){function e(a,c){var d=K[a];return h.isPlainObject(d)?Ia(d,c||b):d}function d(a,b){return c.trigger.apply(c,[a,b||q].concat(Array.prototype.slice.call(arguments,2),[q]))}function f(a){return a.end?
t(a.end):x(a)}function k(a,b,c){a=Q[a._id];var d,e=a.length;for(d=0;d<e;d++)if(!b||a[d][0]!=b[0])a[d][c]()}function B(a,b,c,d){c=c||0;for(var e,f=a.length,g=0;g<f;g++)e=a[g],d!==G&&(e.allDay=d),L(C(e.start,b,!0),c),e.end&&(e.end=L(C(e.end,b,!0),c)),F(e,K)}function l(a,b,c){c=c||0;for(var d,e=a.length,g=0;g<e;g++)d=a[g],d.end=L(C(f(d),b,!0),c),F(d,K)}function m(a,b){var c=q.getColCnt(),d=O?-1:1,e=O?c-1:0;"object"==typeof a&&(b=a.col,a=a.row);return a*c+(b*d+e)}function u(a){var b=q.visStart.getDay();
a+=n[b];return 7*Math.floor(a/H)+R[(a%H+H)%H]-b}function g(a){var b=t(q.visStart);C(b,a);return b}function A(a){return ka(a,q.visStart)}function s(a){var b=q.visStart.getDay();a+=b;return Math.floor(a/7)*H+n[(a%7+7)%7]-n[b]}function y(a){var b=q.getColCnt();return{row:Math.floor(a/b),col:(a%b+b)%b*(O?-1:1)+(O?b-1:0)}}var q=this;q.element=a;q.calendar=c;q.name=b;q.opt=e;q.trigger=d;q.isEventDraggable=function(a){var b=a.source||{};return ia(a.startEditable,b.startEditable,e("eventStartEditable"),a.editable,
b.editable,e("editable"))&&!e("disableDragging")};q.isEventResizable=function(a){var b=a.source||{};return ia(a.durationEditable,b.durationEditable,e("eventDurationEditable"),a.editable,b.editable,e("editable"))&&!e("disableResizing")};q.setEventData=function(a){p={};var b,c=a.length,d;for(b=0;b<c;b++)d=a[b],p[d._id]?p[d._id].push(d):p[d._id]=[d]};q.clearEventData=function(){p={};Q={};X=[]};q.eventEnd=f;q.reportEventElement=function(a,b){X.push({event:a,element:b});Q[a._id]?Q[a._id].push(b):Q[a._id]=
[b]};q.triggerEventDestroy=function(){h.each(X,function(a,b){q.trigger("eventDestroy",b.event,b.event,b.element)})};q.eventElementHandlers=function(a,b){b.click(function(c){if(!b.hasClass("ui-draggable-dragging")&&!b.hasClass("ui-resizable-resizing"))return d("eventClick",this,a,c)}).hover(function(b){d("eventMouseover",this,a,b)},function(b){d("eventMouseout",this,a,b)})};q.showEvents=function(a,b){k(a,b,"show")};q.hideEvents=function(a,b){k(a,b,"hide")};q.eventDrop=function(a,b,c,e,f,g,k){var l=
b.allDay,m=b._id;B(p[m],c,e,f);d("eventDrop",a,b,c,e,f,function(){B(p[m],-c,-e,l);N(m)},g,k);N(m)};q.eventResize=function(a,b,c,e,f,g){var k=b._id;l(p[k],c,e);d("eventResize",a,b,c,e,function(){l(p[k],-c,-e);N(k)},f,g);N(k)};var x=q.defaultEventEnd,F=c.normalizeEvent,N=c.reportEventChange,p={},Q={},X=[],K=c.options;q.isHiddenDay=function(a){"object"==typeof a&&(a=a.getDay());return P[a]};q.skipHiddenDays=function(a,b,c){for(b=b||1;P[(a.getDay()+(c?b:0)+7)%7];)C(a,b)};q.getCellsPerWeek=function(){return H};
q.dateToCell=function(a){a=A(a);a=s(a);return y(a)};q.dateToDayOffset=A;q.dayOffsetToCellOffset=s;q.cellOffsetToCell=y;q.cellToDate=function(){var a=m.apply(null,arguments),a=u(a);return g(a)};q.cellToCellOffset=m;q.cellOffsetToDayOffset=u;q.dayOffsetToDate=g;q.rangeToSegments=function(a,b){for(var c=q.getRowCnt(),d=q.getColCnt(),e=[],f=A(a),g=A(b),k=s(f),l=s(g)-1,m=0;m<c;m++){var h=m*d,p=h+d-1,h=Math.max(k,h),p=Math.min(l,p);if(h<=p){var n=y(h),B=y(p),n=[n.col,B.col].sort(),h=u(h)==f,p=u(p)+1==g;
e.push({row:m,leftCol:n[0],rightCol:n[1],isStart:h,isEnd:p})}}return e};q.segmentCompare=function(a,b){var c;c="msLength"in a?b.msLength-a.msLength:b.rightCol-b.leftCol-(a.rightCol-a.leftCol)||b.event.allDay-a.event.allDay;return c||a.event.start-b.event.start||(a.event.title||"").localeCompare(b.event.title)};var M=e("hiddenDays")||[],P=[],H,n=[],R=[],O=e("isRTL");(function(){!1===e("weekends")&&M.push(0,6);for(var a=0,b=0;7>a;a++)n[a]=b,P[a]=-1!=h.inArray(a,M),P[a]||(R[b]=a,b++);H=b;if(!H)throw"invalid hiddenDays";
})()}function ib(){function a(a,b,d){a=c([a],!0,!1);var e=[];Q(a,function(a,c){a.row===b&&c.css("top",d);e.push(c[0])});return e}function c(a,c,g){var l=r(),m=c?h("<div/>"):l;a=b(a);var p;e(a);p=d(a);m[0].innerHTML=p;m=m.children();c&&l.append(m);f(a,m);Q(a,function(a,b){a.hsides=Na(b)+Oa(b)+Pa(b)});Q(a,function(a,b){b.width(Math.max(0,a.outerWidth-a.hsides))});Q(a,function(a,b){a.outerHeight=b.outerHeight(!0)});k(a,g);return a}function b(a){for(var b=[],c=0;c<a.length;c++){for(var d=a[c],e=d.start,
f=ua(d),e=ba(e,f),f=0;f<e.length;f++)e[f].event=d;b.push.apply(b,e)}return b}function e(a){for(var b=A("isRTL"),c=0;c<a.length;c++){var d=a[c],e=(b?d.isStart:d.isEnd)?v:R,f=((b?d.isEnd:d.isStart)?O:n)(d.leftCol),e=e(d.rightCol);d.left=f;d.outerWidth=e-f}}function d(a){for(var b="",c=0;c<a.length;c++){var d=a[c],e="",f=A("isRTL"),g=d.event,k=g.url,m=["fc-event","fc-event-hori"];y(g)&&m.push("fc-event-draggable");d.isStart&&m.push("fc-event-start");d.isEnd&&m.push("fc-event-end");m=m.concat(g.className);
g.source&&(m=m.concat(g.source.className||[]));var l=ab(g,A),e=k?e+("<a href='"+da(k)+"'"):e+"<div",e=e+(" class='"+m.join(" ")+"' style='position:absolute;left:"+d.left+"px;"+l+"'><div class='fc-event-inner'>");!g.allDay&&d.isStart&&(e+="<span class='fc-event-time'>"+da(w(g.start,g.end,A("timeFormat")))+"</span>");e+="<span class='fc-event-title'>"+da(g.title||"")+"</span></div>";d.isEnd&&q(g)&&(e+="<div class='ui-resizable-handle ui-resizable-"+(f?"w":"e")+"'>&nbsp;&nbsp;&nbsp;</div>");e+="</"+
(k?"a":"div")+">";b+=e}return b}function f(a,b){for(var c=0;c<a.length;c++){var d=a[c],e=d.event,f=b.eq(c),e=s("eventRender",e,e,f);!1===e?f.remove():(e&&!0!==e&&(e=h(e).css({position:"absolute",left:d.left}),f.replaceWith(e),f=e),d.element=f)}}function k(a,b){var c=B(a),d=l(),e=[];if(b)for(var f=0;f<d.length;f++)d[f].height(c[f]);for(f=0;f<d.length;f++)e.push(d[f].position().top);Q(a,function(a,b){b.css("top",e[a.row]+a.top)})}function B(a){var b=M(),c=P(),d=[],e=M(),f=[],g,k,m;for(g=0;g<a.length;g++)k=
a[g],m=k.row,k.element&&(f[m]?f[m].push(k):f[m]=[k]);for(m=0;m<e;m++){a=f;g=m;k=[];var l;l=f[m]||[];l.sort(U);for(var h=[],p=0;p<l.length;p++){for(var q=l[p],n=0;n<h.length;n++){var r;a:{r=h[n];for(var B=0;B<r.length;B++){var s=r[B];if(s.leftCol<=q.rightCol&&s.rightCol>=q.leftCol){r=!0;break a}}r=!1}if(!r)break}h[n]?h[n].push(q):h[n]=[q]}l=h;for(h=0;h<l.length;h++)k.push.apply(k,l[h]);a[g]=k}for(e=0;e<b;e++){m=f[e];a=[];for(l=0;l<c;l++)a.push(0);for(g=0;g<m.length;g++)for(l=k=m[g],h=a.slice(k.leftCol,
k.rightCol+1),h=Math.max.apply(Math,h),l.top=h,l=k.leftCol;l<=k.rightCol;l++)a[l]=k.top+k.outerHeight;d.push(Math.max.apply(Math,a))}return d}function l(){var a,b=M(),c=[];for(a=0;a<b;a++)c[a]=H(a).find("div.fc-day-content > div");return c}function m(a,b){var c=r();Q(a,function(a,c,d){var e=a.event;e._id===b?u(e,c,a):c[0]._fci=d});Ya(c,a,u)}function u(a,b,c){y(a)&&g.draggableDayEvent(a,b,c);c.isEnd&&q(a)&&g.resizableDayEvent(a,b,c);G(a,b)}var g=this;g.renderDayEvents=function(a,b){var d=c(a,!1,!0);
Q(d,function(a,b){F(a.event,b)});m(d,b);Q(d,function(a,b){s("eventAfterRender",a.event,a.event,b)})};g.draggableDayEvent=function(a,b){var c=S(),d;b.draggable({delay:50,opacity:A("dragOpacity"),revertDuration:A("dragRevertDuration"),start:function(e,f){s("eventDragStart",b,a,e,f);L(a,b);c.start(function(c,e,f,g){b.draggable("option","revert",!c||!f&&!g);D();c?(e=aa(e),c=aa(c),d=ka(c,e),z(C(t(a.start),d),C(ua(a),d))):d=0},e,"drag")},stop:function(e,f){c.stop();D();s("eventDragStop",b,a,e,f);d?N(this,
a,d,0,a.allDay,e,f):(b.css("filter",""),p(a,b))}})};g.resizableDayEvent=function(b,c,d){var e=A("isRTL")?"w":"e",f=c.find(".ui-resizable-"+e),g=!1;xa(c);c.mousedown(function(a){a.preventDefault()}).click(function(a){g&&(a.preventDefault(),a.stopImmediatePropagation())});f.mousedown(function(f){function k(a){s("eventResizeStop",this,b,a);h("body").css("cursor","");m.stop();D();q&&K(this,b,q,0,a);setTimeout(function(){g=!1},0)}if(1==f.which){g=!0;var m=S();M();P();var l=c.css("top"),q,n,r=h.extend({},
b),B=Y(V(b.start));Z();h("body").css("cursor",e+"-resize").one("mouseup",k);s("eventResizeStart",this,b,f);m.start(function(c,f){if(c){var g=T(f),k=T(c),k=Math.max(k,B);(q=ga(k)-ga(g))?(r.end=C(x(b),q,!0),g=n,n=a(r,d.row,l),n=h(n),n.find("*").css("cursor",e+"-resize"),g&&g.remove(),L(b)):n&&(p(b),n.remove(),n=null);D();z(b.start,C(ua(b),q))}},f)}})};var A=g.opt,s=g.trigger,y=g.isEventDraggable,q=g.isEventResizable,x=g.eventEnd,F=g.reportEventElement,G=g.eventElementHandlers,p=g.showEvents,L=g.hideEvents,
N=g.eventDrop,K=g.eventResize,M=g.getRowCnt,P=g.getColCnt,H=g.allDayRow,n=g.colLeft,R=g.colRight,O=g.colContentLeft,v=g.colContentRight,r=g.getDaySegmentContainer,w=g.calendar.formatDates,z=g.renderDayOverlay,D=g.clearOverlays,Z=g.clearSelection,S=g.getHoverListener,ba=g.rangeToSegments,U=g.segmentCompare,aa=g.cellToDate,T=g.cellToCellOffset,ga=g.cellOffsetToDayOffset,V=g.dateToDayOffset,Y=g.dayOffsetToCellOffset}function Q(a,c){for(var b=0;b<a.length;b++){var e=a[b],d=e.element;d&&c(e,d,b)}}function fb(){function a(a){l&&
(l=!1,B(),d("unselect",null,a))}function c(a,b,c,e){l=!0;d("select",null,a,b,c,e)}var b=this;b.select=function(b,d,e){a();d||(d=f(b,e));k(b,d,e);c(b,d,e)};b.unselect=a;b.reportSelection=c;b.daySelectionMousedown=function(d){var f=b.cellToDate,g=b.getIsCellAllDay,l=b.getHoverListener(),s=b.reportDayClick;if(1==d.which&&e("selectable")){a(d);var t;l.start(function(a,b){B();a&&g(a)?(t=[f(b),f(a)].sort($a),k(t[0],t[1],!0)):t=null},d);h(document).one("mouseup",function(a){l.stop();t&&(+t[0]==+t[1]&&s(t[0],
!0,a),c(t[0],t[1],!0,a))})}};var e=b.opt,d=b.trigger,f=b.defaultSelectionEnd,k=b.renderSelection,B=b.clearSelection,l=!1;e("selectable")&&e("unselectAuto")&&h(document).mousedown(function(b){var c=e("unselectCancel");c&&h(b.target).parents(c).length||a(b)})}function eb(){this.renderOverlay=function(b,e){var d=c.shift();d||(d=h("<div class='fc-cell-overlay' style='position:absolute;z-index:3'/>"));d[0].parentNode!=e[0]&&d.appendTo(e);a.push(d.css(b).show());return d};this.clearOverlays=function(){for(var b;b=
a.shift();)c.push(b.hide().unbind())};var a=[],c=[]}function gb(a){var c,b;this.build=function(){c=[];b=[];a(c,b)};this.cell=function(a,d){var f=c.length,k=b.length,h,l=-1,m=-1;for(h=0;h<f;h++)if(d>=c[h][0]&&d<c[h][1]){l=h;break}for(h=0;h<k;h++)if(a>=b[h][0]&&a<b[h][1]){m=h;break}return 0<=l&&0<=m?{row:l,col:m}:null};this.rect=function(a,d,f,k,h){h=h.offset();return{top:c[a][0]-h.top,left:b[d][0]-h.left,width:b[k][1]-b[d][0],height:c[f][1]-c[a][0]}}}function hb(a){function c(b){b.pageX===G&&(b.pageX=
b.originalEvent.pageX,b.pageY=b.originalEvent.pageY);b=a.cell(b.pageX,b.pageY);if(!b!=!f||b&&(b.row!=f.row||b.col!=f.col))b?(d||(d=b),e(b,d,b.row-d.row,b.col-d.col)):e(b,d),f=b}var b,e,d,f;this.start=function(k,t,l){e=k;d=f=null;a.build();c(t);b=l||"mousemove";h(document).bind(b,c)};this.stop=function(){h(document).unbind(b,c);return f}}function Ba(a){var c=this,b={},e={},d={};c.left=function(c){return e[c]=e[c]===G?(b[c]=b[c]||a(c)).position().left:e[c]};c.right=function(e){return d[e]=d[e]===G?
c.left(e)+(b[e]=b[e]||a(e)).width():d[e]};c.clear=function(){b={};e={};d={}}}var wa={defaultView:"month",aspectRatio:1.35,header:{left:"title",center:"",right:"today prev,next"},weekends:!0,weekNumbers:!1,weekNumberCalculation:"iso",weekNumberTitle:"W",allDayDefault:!0,ignoreTimezone:!0,lazyFetching:!0,startParam:"start",endParam:"end",titleFormat:{month:"MMMM yyyy",week:"MMM d[ yyyy]{ '&#8212;'[ MMM] d yyyy}",day:"dddd, MMM d, yyyy"},columnFormat:{month:"ddd",week:"ddd M/d",day:"dddd M/d"},timeFormat:{"":"h(:mm)t"},
isRTL:!1,firstDay:0,monthNames:"January February March April May June July August September October November December".split(" "),monthNamesShort:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),dayNames:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),dayNamesShort:"Sun Mon Tue Wed Thu Fri Sat".split(" "),buttonText:{prev:"<span class='fc-text-arrow'>&lsaquo;</span>",next:"<span class='fc-text-arrow'>&rsaquo;</span>",prevYear:"<span class='fc-text-arrow'>&laquo;</span>",
nextYear:"<span class='fc-text-arrow'>&raquo;</span>",today:"today",month:"month",week:"week",day:"day"},theme:!1,buttonIcons:{prev:"circle-triangle-w",next:"circle-triangle-e"},unselectAuto:!0,dropAccept:"*",handleWindowResize:!0},xb={header:{left:"next,prev today",center:"",right:"title"},buttonText:{prev:"<span class='fc-text-arrow'>&rsaquo;</span>",next:"<span class='fc-text-arrow'>&lsaquo;</span>",prevYear:"<span class='fc-text-arrow'>&raquo;</span>",nextYear:"<span class='fc-text-arrow'>&laquo;</span>"},
buttonIcons:{prev:"circle-triangle-e",next:"circle-triangle-w"}},N=h.fullCalendar={version:"1.6.3"},Z=N.views={};h.fn.fullCalendar=function(a){if("string"==typeof a){var c=Array.prototype.slice.call(arguments,1),b;this.each(function(){var d=h.data(this,"fullCalendar");d&&h.isFunction(d[a])&&(d=d[a].apply(d,c),b===G&&(b=d),"destroy"==a&&h.removeData(this,"fullCalendar"))});return b!==G?b:this}var e=a.eventSources||[];delete a.eventSources;a.events&&(e.push(a.events),delete a.events);a=h.extend(!0,
{},wa,a.isRTL||a.isRTL===G&&wa.isRTL?xb:{},a);this.each(function(b,c){var k=h(c),t=new lb(k,a,e);k.data("fullCalendar",t);t.render()});return this};N.sourceNormalizers=[];N.sourceFetchers=[];var qb={dataType:"json",cache:!1},rb=1;N.addDays=C;N.cloneDate=t;N.parseDate=Ja;N.parseISO8601=La;N.parseTime=Ma;N.formatDate=ha;N.formatDates=Ha;var Aa="sun mon tue wed thu fri sat".split(" "),tb=864E5,sb=36E5,wb=6E4,Xa={s:function(a){return a.getSeconds()},ss:function(a){return ba(a.getSeconds())},m:function(a){return a.getMinutes()},
mm:function(a){return ba(a.getMinutes())},h:function(a){return a.getHours()%12||12},hh:function(a){return ba(a.getHours()%12||12)},H:function(a){return a.getHours()},HH:function(a){return ba(a.getHours())},d:function(a){return a.getDate()},dd:function(a){return ba(a.getDate())},ddd:function(a,c){return c.dayNamesShort[a.getDay()]},dddd:function(a,c){return c.dayNames[a.getDay()]},M:function(a){return a.getMonth()+1},MM:function(a){return ba(a.getMonth()+1)},MMM:function(a,c){return c.monthNamesShort[a.getMonth()]},
MMMM:function(a,c){return c.monthNames[a.getMonth()]},yy:function(a){return(a.getFullYear()+"").substring(2)},yyyy:function(a){return a.getFullYear()},t:function(a){return 12>a.getHours()?"a":"p"},tt:function(a){return 12>a.getHours()?"am":"pm"},T:function(a){return 12>a.getHours()?"A":"P"},TT:function(a){return 12>a.getHours()?"AM":"PM"},u:function(a){return ha(a,"yyyy-MM-dd'T'HH:mm:ss'Z'")},S:function(a){a=a.getDate();return 10<a&&20>a?"th":["st","nd","rd"][a%10-1]||"th"},w:function(a,c){return c.weekNumberCalculation(a)},
W:function(a){var c=new Date(a.getTime());c.setDate(c.getDate()+4-(c.getDay()||7));a=c.getTime();c.setMonth(0);c.setDate(1);return Math.floor(Math.round((a-c)/864E5)/7)+1}};N.dateFormatters=Xa;N.applyAll=ya;Z.month=function(a,c){var b=this;b.render=function(a,c){c&&(Ga(a,c),a.setDate(1));var u=e("firstDay"),g=t(a,!0);g.setDate(1);var A=Ga(t(g),1),s=t(g);C(s,-((s.getDay()-u+7)%7));f(s);var y=t(A);C(y,(7-y.getDay()+u)%7);f(y,-1,!0);var u=k(),q=Math.round(ka(y,s)/7);"fixed"==e("weekMode")&&(C(y,7*(6-
q)),q=6);b.title=h(g,e("titleFormat"));b.start=g;b.end=A;b.visStart=s;b.visEnd=y;d(q,u,!0)};Qa.call(b,a,c,"month");var e=b.opt,d=b.renderBasic,f=b.skipHiddenDays,k=b.getCellsPerWeek,h=c.formatDate};Z.basicWeek=function(a,c){var b=this;b.render=function(a,c){c&&C(a,7*c);var u=C(t(a),-((a.getDay()-e("firstDay")+7)%7)),g=C(t(u),7),A=t(u);f(A);var s=t(g);f(s,-1,!0);var y=k();b.start=u;b.end=g;b.visStart=A;b.visEnd=s;b.title=h(A,C(t(s),-1),e("titleFormat"));d(1,y,!1)};Qa.call(b,a,c,"basicWeek");var e=
b.opt,d=b.renderBasic,f=b.skipHiddenDays,k=b.getCellsPerWeek,h=c.formatDates};Z.basicDay=function(a,c){var b=this;b.render=function(a,c){c&&C(a,c);f(a,0>c?-1:1);var h=t(a,!0),u=C(t(h),1);b.title=k(a,e("titleFormat"));b.start=b.visStart=h;b.end=b.visEnd=u;d(1,1,!1)};Qa.call(b,a,c,"basicDay");var e=b.opt,d=b.renderBasic,f=b.skipHiddenDays,k=c.formatDate};Ua({weekMode:"fixed"});Z.agendaWeek=function(a,c){var b=this;b.render=function(a,c){c&&C(a,7*c);var u=C(t(a),-((a.getDay()-e("firstDay")+7)%7)),g=
C(t(u),7),A=t(u);f(A);var s=t(g);f(s,-1,!0);var y=h();b.title=B(A,C(t(s),-1),e("titleFormat"));b.start=u;b.end=g;b.visStart=A;b.visEnd=s;d(y)};jb.call(b,a,c,"agendaWeek");var e=b.opt,d=b.renderAgenda,f=b.skipHiddenDays,h=b.getCellsPerWeek,B=c.formatDates};Z.agendaDay=function(a,c){var b=this;b.render=function(a,c){c&&C(a,c);f(a,0>c?-1:1);var m=t(a,!0),u=C(t(m),1);b.title=h(a,e("titleFormat"));b.start=b.visStart=m;b.end=b.visEnd=u;d(1)};jb.call(b,a,c,"agendaDay");var e=b.opt,d=b.renderAgenda,f=b.skipHiddenDays,
h=c.formatDate};Ua({allDaySlot:!0,allDayText:"all-day",firstHour:6,slotMinutes:30,defaultEventMinutes:120,axisFormat:"h(:mm)tt",timeFormat:{agenda:"h:mm{ - h:mm}"},dragOpacity:{agenda:0.5},minTime:0,maxTime:24})})(jQuery);$(document).ready(function(){$("#eventsCalendar").fullCalendar({events:"/data/events.json"})});
